<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Metaetiquetas generales (por defecto) -->
<meta name="description" content="FullStreamRec ofrece las mejores cuentas de Netflix, Disney+, Spotify, IPTV y recargas gamer en Ecuador. Planes económicos, servicio confiable y entrega inmediata.">
<meta name="keywords" content="Netflix económico Ecuador, Disney+ barato Ecuador, Spotify Premium Ecuador, IPTV legal Ecuador, recargas juegos Ecuador, diamantes Free Fire Ecuador, planes streaming económicos, servicios streaming Ecuador, FullStreamRec, IPTV estable sin cortes, dónde comprar streaming económico, mejores planes digitales Ecuador, servicio confiable recargas juegos">
<meta name="author" content="FullStreamRec">
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#000000">

<!-- Open Graph por defecto -->
<meta property="og:title" content="FullStreamRec | Servicios de Streaming en Ecuador">
<meta property="og:description" content="Compra tus planes de streaming favoritos con FullStreamRec. Confiable, económico y con atención personalizada por WhatsApp.">
<meta property="og:image" content="https://fullstreamrec.com/logo.jpg">
<meta property="og:url" content="https://fullstreamrec.com">
<meta property="og:type" content="website">

<!-- Contenedor para metaetiquetas dinámicas -->
<meta id="dynamic-og-title" property="og:title" content="">
<meta id="dynamic-og-description" property="og:description" content="">
<meta id="dynamic-og-image" property="og:image" content="">
<meta id="dynamic-og-url" property="og:url" content="">

<link rel="canonical" href="https://fullstreamrec.com">
<link rel="icon" type="image/x-icon" href="logo.ico">
  <title>FullstreamRec</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;700&display=swap" rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js" ></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js" ></script>

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "FullStreamRec",
    "image": "https://fullstreamrec.com/logo.jpg",
    "description": "Venta de servicios de streaming y recargas digitales en Ecuador",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "EC"
    },
    "telephone": "+593978652638",
    "url": "https://fullstreamrec.com",
    "priceRange": "$$",
    "openingHours": "Mo-Su 08:00-22:00",
    "sameAs": [
      "https://wa.me/593978652638"
    ]
  }
  </script>

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #000;
      color: #000;
    }
/* Añade esto en tu sección de estilos */
#particles-js {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: -1;
  pointer-events: none;
}
    header {
      background-color: #000000;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 10;
      color: white;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .navbar a {
      text-decoration: none;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
    }

    nav {
      display: flex;
      gap: 1rem;
    }

    nav a {
      text-decoration: none;
      color: black;
      font-weight: 500;
    }



/* Modal que cubre toda la pantalla */
.fullscreen-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.fullscreen-modal.show {
  opacity: 1;
  pointer-events: auto;
}

/* Contenido del modal */
.modal-content {
  background-color: #fff;
  border-radius: 12px;
  padding: 2rem;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
  animation: modalFadeIn 0.3s ease-out;
}
button[disabled] {
  opacity: 0.2;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(70%);
}

@keyframes modalFadeIn {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.modal-close {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.8rem;
  cursor: pointer;
  color: #ff5e66;
  transition: transform 0.2s;
  z-index: 10;
}

.modal-close:hover {
  transform: scale(1.2);
}

/* Evitar scroll del body cuando el modal está abierto */
body.modal-open {
  overflow: hidden;
}

/* Estilos para el contenido dentro del modal */
.modal-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #eee;
}

.modal-logo {
  width: 60px;
  height: 60px;
  object-fit: contain;
  border-radius: 8px;
}

.plans-container {
  display: grid;
  gap: 1rem;
}

.plan-item {
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 1.2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: transform 0.2s, box-shadow 0.2s;
  border: 1px solid #eee;
}

.plan-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
    }

    .hamburger div {
      width: 25px;
      height: 3px;
      background-color: rgb(255, 255, 255);
    }

    .mobile-menu {
      display: none;
      flex-direction: column;
      background-color: rgb(0, 0, 0);
      padding: 1rem;
    }

    .mobile-menu a {
      margin-bottom: 1rem;
      text-decoration: none;
      color: rgb(255, 255, 255);
      padding: 1rem;
      outline: #ffffff solid 1px;
      border-radius: 4px;
    }

    .mobile-menu.show {
      display: flex;
    }

    .hero {
  text-align: center;
  margin-top: 2rem;
  color: white;
  font-size: 2rem;
  padding: 1rem;
  animation: fadeIn 2s ease-in-out;
  min-height: 500px; /* espacio reservado para evitar saltos */
  display: flex;
  align-items: center;
  justify-content: center;
  /* background-color: #850007; */
}



.cursor {
  display: inline-block;
  background-color: white;
  width: 3px;
  animation: blink 0.7s infinite;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}


main {
  padding: 1rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 3rem;
  max-width: 1200px;
  margin: 0 auto;
}

    .card {
      background-color: #fff;
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 4px 2px 10px rgba(0, 0, 0, 0.5);
      text-align: center;
      opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .card.visible {
  opacity: 1;
  transform: translateY(0);
}

    .card img {
      max-width: 135px;
      margin-bottom: 1rem;
    }

    .card h2 {
      font-size: 1.2rem;
      margin: 0.5rem 0;
    }

    .card select {
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      border: none;
      background-color: #ffffff;
      color: #000000;
      outline: solid 1px black;
    }

    .card button {
      background-color: #000000;
      color: white;
      border: none;
      padding: 0.7rem 1rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.7s;
    }

    .card button:hover {
      background-color: #ff0000;
      box-shadow: 0 0 10px #ff5e66;
      outline: solid 1px #850007;
    }
    .category-title {
  font-size: 1.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  padding-bottom: 0.5rem;
  max-width: 1200px;
  margin: 0 auto;
  padding-left: 1rem;
  padding-right: 1rem;
  text-align: center;
}

.category-title::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background-color: #ff5e66;
}
    footer {
      background-color: #000;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 4rem;
    }

    footer a {
      color: #ff5e66;
    }

    @media (max-width: 768px) {
      nav {
        display: none;
      }

      .hamburger {
        display: flex;
      }
      .hero{
        font-size: 1.5rem;

      }
    }

 /* Estilos mejorados para el modal del carrito */
.cart-modal {
  position: fixed;
  top: 0;
  right: 0;
  width: 100%;
  max-width: 450px;
  height: 100%;
  background-color: #1a1a1a;
  z-index: 1001;
  transform: translateX(100%);
  transition: transform 0.3s ease;
  padding: 1.5rem;
  box-shadow: -5px 0 25px rgba(0,0,0,0.4);
  color: white;
  overflow-y: auto;
}

.cart-modal.show {
  transform: translateX(0);
}

.cart-modal h3 {
  color: #ff5e66;
  font-size: 1.8rem;
  margin-bottom: 1.5rem;
  text-align: center;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #ff5e66;
}

.cart-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem 0;
  border-bottom: 1px solid #333;
}

.cart-item img {
  width: 60px;
  height: 60px;
  object-fit: contain;
  border-radius: 8px;
  background-color: white;
  padding: 5px;
}

.cart-item-info {
  flex: 1;
}

.cart-item-info strong {
  color: #ff5e66;
  display: block;
  margin-bottom: 0.3rem;
}

.cart-item-info span {
  font-size: 0.9rem;
  color: #ccc;
}

.cart-item button {
  background: none;
  border: none;
  color: #ff5e66;
  font-size: 1.2rem;
  cursor: pointer;
  transition: transform 0.2s;
}

.cart-item button:hover {
  transform: scale(1.2);
}

.cart-total {
  font-weight: bold;
  margin: 1.5rem 0;
  text-align: right;
  font-size: 1.3rem;
  color: #ff5e66;
}

#whatsappCheckout {
  text-decoration: none;
  display: block;
}

#whatsappCheckout button {
  background-color: #25D366;
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 8px;
  font-size: 1.1rem;
  cursor: pointer;
  width: 100%;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

#whatsappCheckout button:hover {
  background-color: #128C7E;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(18, 140, 126, 0.4);
}

.close-cart {
  background: none;
  border: none;
  font-size: 2rem;
  position: absolute;
  right: 1.5rem;
  top: 1rem;
  cursor: pointer;
  color: #ff5e66;
  transition: transform 0.2s;
}

.close-cart:hover {
  transform: rotate(90deg);
}

/* Efecto de vacío en el carrito */
.cart-empty {
  text-align: center;
  padding: 2rem 0;
  color: #888;
}

.cart-empty svg {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: #ff5e66;
}
/* spineer */
.cargando {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 0 auto;
    }

    .cargando:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid transparent;
      border-top-color: #ffffff;
      border-bottom-color: #ff007a;
      background: linear-gradient(45deg, #ffffff, #ff007a) border-box;
      animation: neonSpin 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      box-shadow: 0 0 15px rgba(0, 255, 234, 0.8),
                  0 0 30px rgba(255, 0, 122, 0.6),
                  0 0 50px rgba(0, 255, 234, 0.4),
                  inset 0 0 10px rgba(255, 0, 122, 0.5);
    }

    @keyframes neonSpin {
      0% {
        transform: rotate(0deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(0, 255, 234, 0.4),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
      50% {
        transform: rotate(180deg) scale(1.1);
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.8),
                    0 0 50px rgba(255, 0, 122, 0.8),
                    0 0 70px rgba(255, 255, 255, 0.8),
                    inset 0 0 15px rgba(255, 0, 122, 0.7);
      }
      100% {
        transform: rotate(360deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(255, 255, 255, 0.8),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
    }

    /* Responsividad */
    @media (max-width: 600px) {
      .cargando {
        width: 60px;
        height: 60px;
      }

      .cargando:before {
        border-width: 4px;
      }
    }

.plan-image {
  width: 40px;
  height: 40px;
  object-fit: contain;
  border-radius: 5px;
  background-color: white;
  padding: 3px;
}
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header>
    <div class="navbar">
      <div class="logo">FullStreamRec</div>
      <nav>
        <a href="contacto.html">Contacto</a>
        <a href="sobre-nosotros.html">Sobre Nosotros</a>
        <a href="faq.html">Preguntas Frecuentes (FAQ)</a>
      </nav>
      <!-- Añade esto -->
  <div class="cart-icon" id="cartIcon">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48"><g fill="none"><path d="M39 32H13L8 12h36z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M3 6h3.5L8 12m0 0l5 20h26l5-20z"/><circle cx="13" cy="39" r="3" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"/><circle cx="39" cy="39" r="3" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M22 22h8m-4 4v-8"/></g></svg>
    <span class="cart-count" id="cartCount">0</span>
  </div>
      <div class="hamburger" id="hamburger">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="contacto.html">Contacto - Soporte</a>
      <a href="sobre-nosotros.html">Sobre Nosotros</a>
      <a href="faq.html">Preguntas Frecuentes (FAQ)</a>
    </div>
  </header>

  <!-- Encabezado principal con efecto de máquina de escribir -->

<div class="hero">
  <h1 style="display: none;">
    FullStreamRec - Servicios de Streaming en Ecuador: Netflix, Disney+, Spotify, IPTV
  </h1> <!-- H1 para SEO -->
  <h2><span class="typed-text"></span><span class="cursor">&nbsp;</span></h2> <!-- Efecto visual -->
</div>



  <main id="products-container"></main>

  <footer>
    <p>&copy; 2025 FullStreamRec. Todos los derechos reservados.</p>
    <p>Contáctanos en <a href="mailto:info@fullstreamrec.com">info@fullstreamrec.com</a> o <a href="https://wa.me/593978652638" target="_blank">WhatsApp</a></p>
  </footer>


<script>
  // Menú hamburguesa
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  hamburger.addEventListener('click', () => {
    mobileMenu.classList.toggle('show');
  });

  // Efecto de máquina de escribir
  const typedText = document.querySelector(".typed-text");
  const words = ["Servicios de Streaming en Ecuador.", "Planes para Netflix, Disney+, Spotify y más.","Recargas de tus videojuegos favoritos.", "¡Atención personalizada por WhatsApp!"];
  let wordIndex = 0;
  let charIndex = 0;
  let isDeleting = false;

  function type() {
    const current = words[wordIndex];
    if (isDeleting) {
      typedText.textContent = current.substring(0, charIndex--);
    } else {
      typedText.textContent = current.substring(0, charIndex++);
    }

    if (!isDeleting && charIndex === current.length) {
      isDeleting = true;
      setTimeout(type, 1500);
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      wordIndex = (wordIndex + 1) % words.length;
      setTimeout(type, 500);
    } else {
      setTimeout(type, isDeleting ? 50 : 100);
    }
  }

  // Detectar cards en pantalla
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      } else {
        entry.target.classList.remove("visible");
      }
    });
  }, {
    threshold: 0.1
  });

  // Inicialización de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCGhcDEti7CWmFFx1iVU_wyKuqN4q2hYeQ",
    authDomain: "site-fullstreamrec.firebaseapp.com",
    projectId: "site-fullstreamrec",
    storageBucket: "site-fullstreamrec.appspot.com",
    messagingSenderId: "161679433276",
    appId: "1:161679433276:web:2ecedce7e76a33ecfe6d39"
  };
  
  // Inicializar Firebase solo si no está inicializado
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  const db = firebase.firestore();
  
  // Función para actualizar el enlace de WhatsApp y mostrar plan seleccionado
  function updateWhatsAppLink(productId, productName, planData) {
    const [planName, planPrice] = planData.split("|");
    const message = encodeURIComponent(
      `*Nuevo Pedido*\n` +
      `*Producto:* ${productName}\n` +
      `*Plan:* ${planName}\n` +
      `*Precio:* ${planPrice}\n` +
      `\nPor favor confirma disponibilidad.`
    );
    
    // Actualizar enlace de WhatsApp
    const whatsappBtn = document.getElementById(`btn-${productId}`);
    if (whatsappBtn) {
      whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${message}`;
      const btnElement = document.getElementById(`buy-btn-${productId}`);
if (btnElement) {
  btnElement.disabled = false;
}
    }
    
    // Mostrar el plan seleccionado en la card
    const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
    if (selectedPlanElement) {
  selectedPlanElement.style.display = 'block';
  selectedPlanElement.querySelector('.selected-plan-name').textContent = planName;
  selectedPlanElement.querySelector('.selected-plan-price').textContent = planPrice;
}

  }
  // evento de la X de quitar el plan-----------------------------------------------
  document.addEventListener('click', (e) => {
  if (e.target.classList.contains('remove-plan-btn')) {
    const productId = e.target.dataset.productId;
    // 1. Eliminar del carrito todos los items de este producto
    cart = cart.filter(item => item.productId !== productId);
  
    updateCart();

    // Ocultar el contenedor del plan
    const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
    if (selectedPlanElement) {
      selectedPlanElement.style.display = 'none';
    }

    // Desactivar el botón de compra
    const buyBtn = document.getElementById(`buy-btn-${productId}`);
    if (buyBtn) {
      buyBtn.disabled = true;
    }

    // Limpiar el enlace de WhatsApp
    const whatsappBtn = document.getElementById(`btn-${productId}`);
    if (whatsappBtn) {
      whatsappBtn.href = '#';
    }
  }
});

  // Crear modal global
  const globalModal = document.createElement('div');
  globalModal.className = 'global-modal';
  globalModal.innerHTML = `
    <div class="global-modal-content">
      <button class="global-modal-close">&times;</button>
      <div class="global-modal-header">
        <img id="global-modal-logo" loading="lazy" src="" alt="" class="global-modal-logo" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
        <h3 class="global-modal-title" id="global-modal-title"></h3>
      </div>
      <div class="global-plans-container" id="global-plans-container"></div>
    </div>
  `;
  document.body.appendChild(globalModal);

  // Funciones para manejar el modal
  function showGlobalModal(product) {
    const modalLogo = document.getElementById('global-modal-logo');
    const modalTitle = document.getElementById('global-modal-title');
    const plansContainer = document.getElementById('global-plans-container');
    
    modalLogo.src = product.logo;
    modalLogo.alt = product.name;
    modalTitle.textContent = `Planes de ${product.name}`;
    
    plansContainer.innerHTML = '';
  product.plans.forEach(plan => {
    const planItem = document.createElement('div');
    planItem.className = 'global-plan-item';
    planItem.innerHTML = `
      <div class="plan-info">
        <img src="${product.logo}" alt="${product.name}" class="plan-image" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
        <div>
          <div class="global-plan-name">${plan.name}</div>
          <div class="global-plan-price">${plan.price}</div>
        </div>
      </div>
      <button class="global-plan-select-btn" 
              data-product-id="${product.id}"
              data-product-name="${product.name}"
              data-plan="${plan.name}|${plan.price}">
        Seleccionar
      </button>
    `;
    plansContainer.appendChild(planItem);
  });
    
    document.body.classList.add('modal-open');
    globalModal.classList.add('show');
  }

  function hideGlobalModal() {
    document.body.classList.remove('modal-open');
    globalModal.classList.remove('show');
  }

  // Eventos del modal
  document.querySelector('.global-modal-close').addEventListener('click', hideGlobalModal);
  globalModal.addEventListener('click', (e) => e.target === globalModal && hideGlobalModal());

  // Delegación de eventos para los botones de selección
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('global-plan-select-btn')) {
      const productId = e.target.dataset.productId;
      const productName = e.target.dataset.productName;
      const planData = e.target.dataset.plan;
      updateWhatsAppLink(productId, productName, planData);
      hideGlobalModal();
    }
  });


// Carrito de compras
let cart = [];

// Modal del carrito (versión mejorada)
const cartModal = document.createElement('div');
cartModal.className = 'cart-modal';
cartModal.innerHTML = `
  <button class="close-cart">&times;</button>
  <h3>🛒 Tu Carrito</h3>
  <div id="cartItems"></div>
  <div class="cart-total">Total: <span id="cartTotal">$0.00</span></div>
  <a id="whatsappCheckout" href="#" target="_blank">
    <button class="whatsapp-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
      </svg>
      Enviar Pedido
    </button>
  </a>
`;
document.body.appendChild(cartModal);

// Eventos del carrito
document.getElementById('cartIcon').addEventListener('click', () => {
  cartModal.classList.add('show');
  document.body.classList.add('modal-open');
});

document.querySelector('.close-cart').addEventListener('click', () => {
  cartModal.classList.remove('show');
  document.body.classList.remove('modal-open');
});

// Función para convertir precios a números
function parsePrice(priceString) {
  // Elimina símbolos de moneda, espacios y comas (para decimales)
  const numericString = priceString.replace(/[^\d.]/g, '');
  return parseFloat(numericString) || 0;
}

// Función para formatear precios consistentemente
function formatPrice(amount) {
  return amount.toLocaleString('es-EC', {
    style: 'currency',
    currency: 'USD',
    minimumFractionDigits: 2
  });
}

// Actualiza la visualización del carrito (versión mejorada)
function updateCart() {
  const cartCount = document.getElementById('cartCount');
  const cartItems = document.getElementById('cartItems');
  const cartTotal = document.getElementById('cartTotal');
  
  cartCount.textContent = cart.length;
  
  // Actualizar items del carrito con imágenes
  if (cart.length > 0) {
    cartItems.innerHTML = cart.map((item, index) => {
      const priceNumber = parsePrice(item.planPrice);
      return `
        <div class="cart-item">
          <img src="${item.productImage}" alt="${item.productName}" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
          <div class="cart-item-info">
            <strong>${item.productName}</strong>
            <span>${item.planName} - ${formatPrice(priceNumber)}</span>
          </div>
          <button onclick="removeFromCart(${index})" title="Eliminar">✕</button>
        </div>
      `;
    }).join('');
  } else {
    cartItems.innerHTML = `
      <div class="cart-empty">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#ff5e66" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="10" cy="20.5" r="1"/><circle cx="18" cy="20.5" r="1"/><path d="M2.5 2.5h3l2.7 12.4a2 2 0 0 0 2 1.6h7.7a2 2 0 0 0 2-1.6l1.6-8.4H7.1"/>
        </svg>
        <p>Tu carrito está vacío</p>
      </div>
    `;
  }
  
  // Calcular total
  const total = cart.reduce((sum, item) => {
    return sum + parsePrice(item.planPrice);
  }, 0);
  
  // Mostrar total formateado
  cartTotal.textContent = formatPrice(total);
  
  // Actualizar enlace de WhatsApp
  const whatsappBtn = document.getElementById('whatsappCheckout');
  if (cart.length > 0) {
    const message = encodeURIComponent(
      `*Pedido desde FullStreamRec*\n\n` +
      cart.map(item => {
        const priceNumber = parsePrice(item.planPrice);
        return `➤ *${item.productName}*: ${item.planName} - ${formatPrice(priceNumber)}`;
      }).join('\n') +
      `\n\n*Total: ${formatPrice(total)}*` +
      `\n\nPor favor confirma disponibilidad.`
    );
    whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${message}`;
  } else {
    whatsappBtn.href = '#';
  }
}

// Funciones del carrito (actualizadas para incluir imagen)
function addToCart(productId, productName, planName, planPrice, productLogo) {
  cart.push({
    productId,
    productName,
    planName,
    planPrice,
    productImage: productLogo || 'https://fakeimg.pl/100x100?text=Imagen'
  });
  updateCart();
}

function removeFromCart(index) {
  const removedItem = cart[index];
  cart.splice(index, 1);
  updateCart();
  
  // Verificar si el producto ya no está en el carrito
  const isProductInCart = cart.some(item => item.productId === removedItem.productId);
  if (!isProductInCart) {
    const selectedPlanElement = document.getElementById(`selected-plan-${removedItem.productId}`);
    if (selectedPlanElement) {
      selectedPlanElement.style.display = 'none';
    }
    
    const buyBtn = document.getElementById(`buy-btn-${removedItem.productId}`);
    if (buyBtn) {
      buyBtn.disabled = true;
    }
  }
}

// Manejar selección de planes (actualizado para obtener imagen)
document.addEventListener('click', (e) => {
  if (e.target.classList.contains('global-plan-select-btn')) {
    const productId = e.target.dataset.productId;
    const productName = e.target.dataset.productName;
    const [planName, planPrice] = e.target.dataset.plan.split("|");
    const productLogo = e.target.closest('.global-plan-item').querySelector('.plan-image')?.src || '';
    
    addToCart(productId, productName, planName.trim(), planPrice.trim(), productLogo);
    hideGlobalModal();
  }
});



  // Carga de productos
  document.addEventListener("DOMContentLoaded", () => {
    type();

    const urlParams = new URLSearchParams(window.location.search);
const sharedProductId = urlParams.get('product');

if (sharedProductId) {
  db.collection("products")
    .doc(sharedProductId)
    .get()
    .then(doc => {
      if (doc.exists) {
        const product = doc.data();
        const productId = doc.id;

        // Actualizar metaetiquetas Open Graph
        document.getElementById('dynamic-og-title').content = `${product.name} | FullStreamRec`;
        document.getElementById('dynamic-og-description').content = `Descubre ${product.name} en FullStreamRec. Planes económicos y confiables para streaming y recargas gamer en Ecuador.`;
        document.getElementById('dynamic-og-image').content = product.logo || 'https://fullstreamrec.com/logo.jpg';
        document.getElementById('dynamic-og-url').content = `${window.location.origin}?product=${productId}`;

        // Actualizar título de la página
        document.title = `${product.name} | FullStreamRec`;

        // Resaltar la card del producto
        const sharedCard = document.querySelector(`.card [data-product-id="${sharedProductId}"]`)?.closest('.card');
        if (sharedCard) {
          sharedCard.classList.add('card-highlight');
          sharedCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    })
    .catch(error => {
      console.error("Error al cargar producto compartido:", error);
    });
}

    const container = document.getElementById("products-container");
    const categoryOrder = [
      "Streaming de Video", "IPTV", "Música", 
      "Videojuegos", "Herramientas Creativas","Combos"
    ];

    container.innerHTML = `<div class="cargando">
  <span class="cargando-text"></span>
</div>`;

    db.collection("products").where("visible", "in", [true, null]).get()
      .then(snapshot => {
        const productsByCategory = {};
        
        snapshot.docs.forEach(doc => {
          const product = doc.data();
          if (product.visible !== false) {
            productsByCategory[product.category] = productsByCategory[product.category] || [];
            productsByCategory[product.category].push({
              id: doc.id,
              ...product
            });
          }
        });

        container.innerHTML = "";

        categoryOrder.forEach(category => {
          if (productsByCategory[category]?.length > 0) {
            const categoryTitle = document.createElement("h2");
            categoryTitle.className = "category-title";
            categoryTitle.textContent = category;
            categoryTitle.style.color = "white";
            container.appendChild(categoryTitle);

            productsByCategory[category].forEach(product => {
  const card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `
    <img src="${product.logo}" alt="${product.name}" 
         loading="lazy" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
    <h2>${product.name}</h2>
    <div id="selected-plan-${product.id}" class="selected-plan-container" style="display: none;">
      <div class="selected-plan">
        <div>
          <span class="selected-plan-name"></span> - 
          <span class="selected-plan-price"></span>
        </div>
        <button class="remove-plan-btn" data-product-id="${product.id}" title="Quitar plan">✕</button>
      </div>
    </div>
   
<button class="card-btn see-plans-btn" data-product-id="${product.id}">
  Ver Planes / Añadir al Carrito
</button>
    <a id="btn-${product.id}" target="_blank" href="#" rel="noopener">
      <button class="card-btn" id="buy-btn-${product.id}" disabled>Comprar Ahora</button>
    </a>
    <!-- Botón de compartir -->
    <button class="copy-btn" data-product-id="${product.id}" title="Copiar enlace del producto">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 3H4v13"/><path d="M8 7h12v12a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/></g></svg>
  <span class="copy-message" style="display: none;">Copiado al portapapeles</span>
</button>
  `;
  container.appendChild(card);
});
// Resaltar producto compartido desde la URL
const urlParams = new URLSearchParams(window.location.search);
const sharedProductId = urlParams.get('product');

if (sharedProductId) {
  const sharedCard = document.querySelector(`.card [data-product-id="${sharedProductId}"]`)?.closest('.card');
  if (sharedCard) {
    sharedCard.classList.add('card-highlight');
    // Opcional: Hacer scroll suave hacia la card
    sharedCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }
}
          }
        });
        // Manejador para compartir productos
container.addEventListener('click', (e) => {
  if (e.target.closest('.share-btn')) {
    const productId = e.target.closest('.share-btn').dataset.productId;
    const product = [...snapshot.docs].find(doc => doc.id === productId)?.data();
    
    if (product && navigator.share) {
      navigator.share({
        title: product.name,
        text: `Mira este producto en FullStreamRec: ${product.name}`,
        url: `${window.location.origin}?product=${productId}`
      }).catch(err => {
        console.log('Error al compartir:', err);
        copyToClipboard(`${window.location.origin}?product=${productId}`);
        alert('Enlace copiado al portapapeles');
      });
    } else {
      copyToClipboard(`${window.location.origin}?product=${productId}`);
      alert('Enlace copiado al portapapeles');
    }
  }
});
// Manejador para copiar enlace
container.addEventListener('click', (e) => {
  if (e.target.closest('.copy-btn')) {
    const button = e.target.closest('.copy-btn');
    const productId = button.dataset.productId;
    const product = [...snapshot.docs].find(doc => doc.id === productId)?.data();
    
    if (product) {
      const url = `${window.location.origin}?product=${productId}`;
      copyToClipboard(url);
      
      // Mostrar mensaje temporal
      const message = button.querySelector('.copy-message');
      message.style.display = 'inline-block';
      setTimeout(() => {
        message.style.display = 'none';
      }, 2000);
    }
  }
});
// Función auxiliar para copiar al portapapeles
function copyToClipboard(text) {
  const textarea = document.createElement('textarea');
  textarea.value = text;
  document.body.appendChild(textarea);
  textarea.select();
  document.execCommand('copy');
  document.body.removeChild(textarea);
}

        // Delegación de eventos para los botones "Ver Planes"
        container.addEventListener('click', (e) => {
          if (e.target.classList.contains('see-plans-btn')) {
            const productId = e.target.dataset.productId;
            const product = [...snapshot.docs]
              .find(doc => doc.id === productId)?.data();
            if (product) showGlobalModal({ id: productId, ...product });
          }
        });

        // Observador de cards
        document.querySelectorAll(".card").forEach(card => observer.observe(card));
      })
      .catch(error => {
        console.error("Error:", error);
        container.innerHTML = `
          <p style="color: red; text-align: center;">
            Error al cargar productos. Contáctanos por 
            <a href="https://wa.me/593978652638" style="color: #ff5e66;">WhatsApp</a>.
          </p>`;
      });
  });

</script>



<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="particles-config.js" ></script>

<style>
  /* Estilos para el plan seleccionado */
  .selected-plan-container {
    margin: 0.5rem 0;
    min-height: 40px;
  }
  
  .selected-plan {
    background-color: rgba(255, 94, 102, 0.1);
    border-radius: 6px;
    padding: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #ff5e66;
  }
  
  .selected-plan-name {
    font-weight: 600;
    color: #333;
    font-size: 0.9rem;
  }
  
  .selected-plan-price {
    font-weight: 700;
    color: #ff5e66;
    font-size: 1rem;
  }
  
  /* Ajustar el espaciado en las cards */
  .card h2 {
    margin-bottom: 0.3rem;
  }
  
  .card-btn {
    margin-top: 0.8rem;
  }

  /* Estilos del modal (se mantienen igual) */
  .global-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
    box-sizing: border-box;
  }
  
  .global-modal.show {
    display: flex;
    animation: fadeIn 0.3s;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .global-modal-content {
    background: white;
    border-radius: 12px;
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
    transform: translateY(-20px);
    transition: transform 0.3s;
  }
  
  .global-modal.show .global-modal-content {
    transform: translateY(0);
  }
  
  .global-modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #ff5e66;
  }
  
  .global-modal-header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    border-bottom: 1px solid #eee;
  }
  
  .global-modal-logo {
    width: 60px;
    height: 60px;
    object-fit: contain;
    border-radius: 8px;
  }
  
  .global-modal-title {
    margin: 0;
    color: #ff5e66;
    font-size: 1.3rem;
  }
  
  .global-plans-container {
    padding: 20px;
    display: grid;
    gap: 15px;
  }
  
  .global-plan-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f9f9f9;
    border-radius: 8px;
    padding: 15px;
    border: 1px solid #eee;
  }
  
  .plan-info {
    flex: 1;
  }
  
  .global-plan-name {
    font-weight: 600;
    margin-bottom: 5px;
  }
  
  .global-plan-price {
    color: #ff5e66;
    font-weight: 700;
  }
  
  .global-plan-select-btn {
    background: #ff5e66;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  }
  
  .global-plan-select-btn:hover {
    background: #e04b5a;
  }
  .remove-plan-btn {
  background: none;
  border: none;
  color: #ff5e66;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0 8px;
  transition: color 0.2s ease;
}

.remove-plan-btn:hover {
  color: #e04b5a;
}
.share-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  margin-top: 0.5rem;
  color: #ffffff;
  transition: color 0.2s;
}

.share-btn:hover {
  color: #ffa2a2;
}

.share-btn svg {
  vertical-align: middle;
}
.card-highlight {
  box-shadow: 0 0 60px rgba(255, 94, 102, 0.8), 0 0 10px rgba(255, 94, 102, 0.5);
  border: 2px solid #ff5e66;
  animation: highlightFade 5s ease forwards;
}

@keyframes highlightFade {
  0% {
    box-shadow: 0 0 50px rgba(255, 94, 102, 0.8), 0 0 10px rgba(255, 94, 102, 0.5);
    border-color: #ff5e66;

  }

  100% {
    box-shadow: none;
    border-color: transparent;
  }
}

.copy-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  margin-top: 0.5rem;
  color: #ffffff;
  transition: color 0.2s;
  position: relative;
}

.copy-btn:hover {
  color: #ffa2a2;
}

.copy-btn svg {
  vertical-align: middle;
}

.copy-message {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  background: #ff5e66;
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 0.8rem;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.copy-message[style*="display: inline-block"] {
  opacity: 1;
}
  body.modal-open {
    overflow: hidden;
  }
</style>
</body>
</html>
