<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Metaetiquetas generales (por defecto) -->
  <meta name="description" content="FullStreamRec ofrece las mejores cuentas de Netflix, Disney+, Spotify, IPTV y recargas gamer en Ecuador. Planes económicos, servicio confiable y entrega inmediata.">
  <meta name="keywords" content="Netflix económico Ecuador, Disney+ barato Ecuador, Spotify Premium Ecuador, IPTV legal Ecuador, recargas juegos Ecuador, diamantes Free Fire Ecuador, planes streaming económicos, servicios streaming Ecuador, FullStreamRec, IPTV estable sin cortes, dónde comprar streaming económico, mejores planes digitales Ecuador, servicio confiable recargas juegos">
  <meta name="author" content="FullStreamRec">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#000000">

  <!-- Open Graph por defecto -->
  <meta property="og:title" content="FullStreamRec | Servicios de Streaming en Ecuador">
  <meta property="og:description" content="Compra tus planes de streaming favoritos con FullStreamRec. Confiable, económico y con atención personalizada por WhatsApp.">
  <meta property="og:image" content="https://fullstreamrec.com/logo.jpg">
  <meta property="og:url" content="https://fullstreamrec.com">
  <meta property="og:type" content="website">

  <!-- Contenedor para metaetiquetas dinámicas -->
  <meta id="dynamic-og-title" property="og:title" content="">
  <meta id="dynamic-og-description" property="og:description" content="">
  <meta id="dynamic-og-image" property="og:image" content="">
  <meta id="dynamic-og-url" property="og:url" content="">

  <link rel="canonical" href="https://fullstreamrec.com">
  <link rel="icon" type="image/x-icon" href="logo.ico">
  <title>FullstreamRec</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "FullStreamRec",
      "image": "https://fullstreamrec.com/logo.jpg",
      "description": "Venta de servicios de streaming y recargas digitales en Ecuador",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "EC"
      },
      "telephone": "+593978652638",
      "url": "https://fullstreamrec.com",
      "priceRange": "$$",
      "openingHours": "Mo-Su 08:00-22:00",
      "sameAs": [
        "https://wa.me/593978652638"
      ]
    }
  </script>

  <style>
    :root {
      --primary-color: #ff5e66;
      --primary-dark: #e04b5a;
      --secondary-color: #00c6ff;
      --dark-color: #0a0a0a;
      --light-color: #ffffff;
      --gray-color: #f5f5f5;
      --dark-gray: #333333;
      --success-color: #25D366;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      --transition: all 0.3s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--dark-color);
      color: var(--light-color);
      line-height: 1.6;
      overflow-x: hidden;
    }
    html{
      scroll-behavior: smooth;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
      pointer-events: none;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    }

    /* Header */
    header {
      background-color: rgba(10, 10, 10, 0.9);
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 100;
      color: var(--light-color);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--light-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo span {
      color: var(--primary-color);
    }

    nav {
      display: flex;
      gap: 1.5rem;
    }

    nav a {
      text-decoration: none;
      color: var(--light-color);
      font-weight: 500;
      transition: var(--transition);
      position: relative;
      padding: 0.5rem 0;
    }

    nav a:hover {
      color: var(--primary-color);
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background-color: var(--primary-color);
      transition: var(--transition);
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Cart Icon */
    .cart-icon {
      position: relative;
      cursor: pointer;
      margin-left: 1.5rem;
      color: var(--light-color);
      transition: var(--transition);
    }

    .cart-icon:hover {
      color: var(--primary-color);
    }

    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
    }

    /* Hamburger Menu */
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
      padding: 0.5rem;
      z-index: 101;
    }

    .hamburger div {
      width: 25px;
      height: 3px;
      background-color: var(--light-color);
      transition: var(--transition);
    }

    .hamburger.active div:nth-child(1) {
      transform: translateY(8px) rotate(45deg);
    }

    .hamburger.active div:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active div:nth-child(3) {
      transform: translateY(-8px) rotate(-45deg);
    }

    .mobile-menu {
      display: none;
      flex-direction: column;
      background-color: rgba(10, 10, 10, 0.95);
      padding: 2rem 1rem;
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100vh - 70px);
      z-index: 99;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    

    .mobile-menu.show {
      transform: translateX(0);
      
    }
.ocultarmenu{
      display: block;
    }
    .mobile-menu a {
      margin-bottom: 1rem;
      text-decoration: none;
      color: var(--light-color);
      padding: 1rem;
      border-radius: 8px;
      transition: var(--transition);
      font-weight: 500;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    body.no-scroll {
  overflow: hidden;
}

    .mobile-menu a:hover {
      background-color: rgba(255, 94, 102, 0.1);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .mobile-menu a i {
      font-size: 1.2rem;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 5rem 1rem;
      min-height: 80vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(255, 94, 102, 0.1) 0%, rgba(10, 10, 10, 0.9) 70%);
      z-index: -1;
    }

    .hero h1 {
      display: none;
    }

    .hero h2 {
      font-size: clamp(1.8rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 2rem;
      line-height: 1.2;
      max-width: 900px;
    }

    .typed-text {
      background: linear-gradient(270deg, #ff5e66, #ff8a00, #ffb347, #ff6b35, #ff5e66);
      background-size: 400% 400%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      display: inline-block;
      animation: 
        rainbowFlow 4s ease-in-out infinite,
        floatingText 3s ease-in-out infinite,
        textPulse 2s ease-in-out infinite alternate;
      filter: drop-shadow(0 0 10px rgba(255, 94, 102, 0.4));
    }

    .typed-text::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, 
        transparent, 
        rgba(255, 94, 102, 0.2), 
        transparent, 
        rgba(255, 107, 53, 0.2),
        transparent);
      background-size: 300% 300%;
      animation: borderGlow 3s linear infinite;
      border-radius: 8px;
      z-index: -1;
    }

    .typed-text::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.8), 
        transparent);
      animation: scanLine 2.5s ease-in-out infinite;
      transform: translateY(-50%);
    }

    /* Animaciones principales */
    @keyframes rainbowFlow {
      0%, 100% { 
        background-position: 0% 50%; 
      }
      25% { 
        background-position: 100% 50%; 
      }
      50% { 
        background-position: 200% 50%; 
      }
      75% { 
        background-position: 300% 50%; 
      }
    }

    @keyframes floatingText {
      0%, 100% { 
        transform: translateY(0px) rotate(0deg);
      }
      25% { 
        transform: translateY(-8px) rotate(0.5deg);
      }
      50% { 
        transform: translateY(-4px) rotate(0deg);
      }
      75% { 
        transform: translateY(-12px) rotate(-0.5deg);
      }
    }

    @keyframes textPulse {
      0% { 
        filter: drop-shadow(0 0 10px rgba(255, 94, 102, 0.4)) brightness(1);
        transform: scale(1);
      }
      100% { 
        filter: drop-shadow(0 0 25px rgba(255, 94, 102, 0.8)) brightness(1.1);
        transform: scale(1.03);
      }
    }

    @keyframes borderGlow {
      0%, 100% { 
        background-position: 0% 50%;
        opacity: 0.3;
      }
      50% { 
        background-position: 100% 50%;
        opacity: 0.7;
      }
    }

    @keyframes scanLine {
      0% { 
        left: -100%;
        opacity: 0;
      }
      50% { 
        opacity: 1;
      }
      100% { 
        left: 100%;
        opacity: 0;
      }
    }

    /* Efectos adicionales en hover */
    .typed-text:hover {
      animation: 
        rainbowFlow 2s ease-in-out infinite,
        floatingText 1.5s ease-in-out infinite,
        textPulse 1s ease-in-out infinite alternate,
        textZoom 0.3s ease-out;
    }

    @keyframes textZoom {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1.05); }
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .hero-btn {
      padding: 0.8rem 1.8rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .primary-btn {
      background-color: var(--primary-color);
      color: var(--light-color);
      box-shadow: 0 4px 15px rgba(255, 94, 102, 0.4);
    }

    .primary-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 94, 102, 0.6);
    }

    .secondary-btn {
      background-color: transparent;
      color: var(--light-color);
      border: 2px solid var(--light-color);
    }

    .secondary-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-3px);
    }

    /* Main Content */
    main {
      padding: 3rem 1rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .category-title {
      font-size: clamp(1.5rem, 3vw, 2.2rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      padding-bottom: 1rem;
      margin: 3rem 0 2rem;
      text-align: center;
      color: var(--light-color);
    }

    .category-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      border-radius: 2px;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    /* Product Card */
    .card {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      text-align: center;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.3s ease;
    }

    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 94, 102, 0.3);
    }

    .card img {
      max-width: 120px;
      height: 80px;
      object-fit: contain;
      margin: 0 auto 1.5rem;
      display: block;
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
      transition: var(--transition);
    }

    .card:hover img {
      transform: scale(1.05);
    }

    .card h2 {
      font-size: 1.2rem;
      margin: 0.5rem 0 1rem;
      color: var(--light-color);
      font-weight: 600;
    }

    /* Selected Plan */
    .selected-plan-container {
      margin: 1rem 0;
      min-height: 40px;
      transition: var(--transition);
    }

    .selected-plan {
      background-color: rgba(255, 94, 102, 0.1);
      border-radius: 8px;
      padding: 0.8rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid var(--primary-color);
      transition: var(--transition);
    }

    .selected-plan:hover {
      background-color: rgba(255, 94, 102, 0.2);
    }

    .selected-plan-name {
      font-weight: 500;
      color: var(--light-color);
      font-size: 0.9rem;
    }

    .selected-plan-price {
      font-weight: 700;
      color: var(--primary-color);
      font-size: 1rem;
    }

    .remove-plan-btn {
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0 0.5rem;
      transition: var(--transition);
    }

    .remove-plan-btn:hover {
      color: var(--light-color);
      transform: scale(1.2);
    }

    /* Card Buttons */
    .card-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      margin-top: 1.5rem;
      justify-content: center;
      align-items: center;
    }

    .card-btn {
      background-color: var(--primary-color);
      color: var(--light-color);
      border: none;
      padding: 0.8rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .card-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 94, 102, 0.4);
    }

    .card-btn i {
      font-size: 1rem;
    }

    .card-btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
      background-color: var(--dark-gray);
      transform: none !important;
      box-shadow: none !important;
    }

    .see-plans-btn {
      background-color: transparent;
      border: 1px solid var(--primary-color);
    }

    .see-plans-btn:hover {
      background-color: rgba(255, 94, 102, 0.1);
    }

    /* Copy Button */
    .copy-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      margin-top: 1rem;
      color: var(--light-color);
      transition: var(--transition);
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .copy-btn:hover {
      color: var(--primary-color);
      opacity: 1;
    }

    .copy-message {
      position: absolute;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary-color);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.7rem;
      white-space: nowrap;
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .copy-message::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid var(--primary-color);
    }

    .copy-message.show {
      opacity: 1;
    }

    /* Highlight Animation */
    .card-highlight {
      animation: highlightPulse 3s ease forwards;
      position: relative;
    }

    .card-highlight::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 14px;
      z-index: -1;
      animation: borderRotate 0.3s linear;
    }

    @keyframes highlightPulse {
      0% {
        box-shadow: 0 0 30px rgba(255, 94, 102, 0.8), 0 0 10px rgba(255, 94, 102, 0.5);
        transform: scale(1);
      }
      50% {
        transform: scale(1.02);
      }
      100% {
        box-shadow: 0 0 20px rgba(255, 94, 102, 0.4), 0 0 5px rgba(255, 94, 102, 0.3);
        transform: scale(1);
      }
    }

    @keyframes borderRotate {
      100% {
        transform: rotate(1turn);
      }
    }

    /* Footer */
    footer {
      background-color: rgba(10, 10, 10, 0.9);
      color: var(--light-color);
      text-align: center;
      padding: 3rem 1rem;
      margin-top: 4rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      text-align: left;
    }

    .footer-column h3 {
      color: var(--primary-color);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      position: relative;
      display: inline-block;
    }

    .footer-column h3::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 40px;
      height: 2px;
      background-color: var(--primary-color);
    }

    .footer-column p {
      margin-bottom: 1rem;
      opacity: 0.8;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.8rem;
    }

    .footer-links a {
      color: var(--light-color);
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .footer-links a:hover {
      color: var(--primary-color);
      transform: translateX(5px);
    }

    .footer-links a i {
      font-size: 0.8rem;
    }

    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .social-links a {
      color: var(--light-color);
      background-color: rgba(255, 255, 255, 0.1);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .social-links a:hover {
      background-color: var(--primary-color);
      transform: translateY(-3px);
    }

    .copyright {
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      opacity: 0.7;
      font-size: 0.9rem;
    }

    footer a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Modal */
    .global-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
      box-sizing: border-box;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .global-modal.show {
      display: flex;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .global-modal-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transform: translateY(-20px);
      transition: transform 0.3s;
    }

    .global-modal.show .global-modal-content {
      transform: translateY(0);
    }

    .global-modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--primary-color);
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .global-modal-close:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: rotate(90deg);
    }

    .global-modal-header {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .global-modal-logo {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 12px;
      background-color: var(--light-color);
      padding: 5px;
      box-shadow: var(--shadow);
    }

    .global-modal-title {
      margin: 0;
      color: var(--light-color);
      font-size: 1.3rem;
      font-weight: 600;
    }

    .global-plans-container {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      max-width: 900px;
      margin: 0 auto;
    }

    .global-plan-item {
      display: flex;
      flex-direction: column;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .global-plan-item:hover {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
      border-color: rgba(255, 94, 102, 0.4);
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 35px rgba(255, 94, 102, 0.2), 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .plan-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .plan-image {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 12px;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 8px;
      margin-bottom: 10px;
    }

    .global-plan-name {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--light-color);
      font-size: 1rem;
      line-height: 1.3;
      text-align: center;
    }

    .global-plan-price {
      color: var(--primary-color);
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .global-plan-select-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      font-size: 0.95rem;
    }

    .global-plan-select-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 94, 102, 0.4);
    }

    /* Cart Modal */
    .cart-modal {
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      max-width: 450px;
      height: 100%;
      background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
      z-index: 1001;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      padding: 1.5rem;
      box-shadow: -5px 0 25px rgba(0, 0, 0, 0.4);
      color: white;
      overflow-y: auto;
      border-left: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .cart-modal.show {
      transform: translateX(0);
    }

    .cart-modal h3 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      text-align: center;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--primary-color);
    }

    .cart-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: var(--transition);
    }

    .cart-item:hover {
      background-color: rgba(255, 255, 255, 0.03);
    }

    .cart-item img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 8px;
      background-color: white;
      padding: 5px;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-info strong {
      color: var(--primary-color);
      display: block;
      margin-bottom: 0.3rem;
      font-weight: 500;
    }

    .cart-item-info span {
      font-size: 0.9rem;
      color: #ccc;
    }

    .cart-item button {
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .cart-item button:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: scale(1.2);
    }

    .cart-total {
      font-weight: bold;
      margin: 1.5rem 0;
      text-align: right;
      font-size: 1.3rem;
      color: var(--primary-color);
    }

    #whatsappCheckout {
      text-decoration: none;
      display: block;
    }

    #whatsappCheckout button {
      background-color: var(--success-color);
      color: white;
      border: none;
      padding: 1rem;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-weight: 600;
    }

    #whatsappCheckout button:hover {
      background-color: #128C7E;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(18, 140, 126, 0.4);
    }

    .close-cart {
      background: none;
      border: none;
      font-size: 2rem;
      position: absolute;
      right: 1.5rem;
      top: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-cart:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: rotate(90deg);
    }

    /* Empty Cart */
    .cart-empty {
      text-align: center;
      padding: 2rem 0;
      color: #888;
    }

    .cart-empty svg {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .cart-empty p {
      margin-top: 1rem;
    }

    /* Loading Spinner */
    .cargando {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 2rem auto;
    }

    .cargando:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid transparent;
      border-top-color: var(--light-color);
      border-bottom-color: var(--primary-color);
      animation: neonSpin 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      box-shadow: 0 0 15px rgba(0, 255, 234, 0.8),
                  0 0 30px rgba(255, 0, 122, 0.6),
                  0 0 50px rgba(0, 255, 234, 0.4),
                  inset 0 0 10px rgba(255, 0, 122, 0.5);
    }

    @keyframes neonSpin {
      0% {
        transform: rotate(0deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(0, 255, 234, 0.4),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
      50% {
        transform: rotate(180deg) scale(1.1);
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.8),
                    0 0 50px rgba(255, 0, 122, 0.8),
                    0 0 70px rgba(255, 255, 255, 0.8),
                    inset 0 0 15px rgba(255, 0, 122, 0.7);
      }
      100% {
        transform: rotate(360deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(255, 255, 255, 0.8),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .products-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      .products-grid {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1.5rem;
      }

      .global-plans-container {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        padding: 15px;
      }

      nav {
        display: none;
      }

      .hamburger {
        display: flex;
      }

      .hero {
        padding: 3rem 1rem;
        min-height: 70vh;
      }

      .hero-buttons {
        flex-direction: column;
        width: 100%;
      }

      .hero-btn {
        width: 100%;
        justify-content: center;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .footer-column {
        text-align: center;
      }

      .footer-column h3::after {
        left: 50%;
        transform: translateX(-50%);
      }

      .footer-links a {
        justify-content: center;
      }

      .social-links {
        justify-content: center;
      }
    }

    @media (max-width: 576px) {
      .products-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 0 1rem;
      }

      .global-modal-content {
        padding: 15px;
        margin: 10px;
      }

      .global-plans-container {
        grid-template-columns: 1fr;
        padding: 15px;
        gap: 15px;
      }

      .global-plan-item {
        padding: 15px;
      }

      .global-plan-select-btn {
        width: 100%;
        justify-content: center;
        padding: 10px 15px;
      }

      .cart-modal {
        max-width: 100%;
        padding: 1rem;
      }
    }

    /* No scroll when modal is open */
    body.modal-open {
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header>
    <div class="navbar">
      <div class="logo">
        <img src="logo.jpg" alt="" width="36px" height="36px">
        FullStreamRec
      </div>
      <nav>
        <a href="contacto.html"><i class="fas fa-envelope"></i> Contacto</a>
        <a href="sobre-nosotros.html"><i class="fas fa-users"></i> Sobre Nosotros</a>
        <a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a>
      </nav>
      <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
      </div>
      <div class="hamburger" id="hamburger">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="contacto.html"><i class="fas fa-envelope"></i> Contacto</a>
      <a href="sobre-nosotros.html"><i class="fas fa-users"></i> Sobre Nosotros</a>
      <a href="faq.html"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <h1>
      FullStreamRec - Servicios de Streaming en Ecuador: Netflix, Disney+, Spotify, IPTV
    </h1>
    <h2><span class="typed-text">Tu mejor opción para streaming y gaming en Ecuador</span></h2>
    <div class="hero-buttons">
      <a href="#products-container" class="hero-btn primary-btn">
        <i class="fas fa-play"></i> Ver Planes de Streaming
      </a>
      <a href="https://wa.me/593978652638" target="_blank" class="hero-btn secondary-btn">
        <i class="fab fa-whatsapp"></i> Contactar por WhatsApp
      </a>
    </div>
  </section>

  <!-- Main Content -->
  <main id="products-container"></main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>FullStreamRec</h3>
        <p>Tu mejor opción para servicios de streaming y recargas digitales en Ecuador.</p>
        <div class="social-links">
          <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
          <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://wa.me/593978652638" target="_blank"><i class="fab fa-whatsapp"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h3>Enlaces Rápidos</h3>
        <ul class="footer-links">
          <li><a href="#"><i class="fas fa-chevron-right"></i> Inicio</a></li>
          <li><a href="contacto.html"><i class="fas fa-chevron-right"></i> Contacto</a></li>
          <li><a href="sobre-nosotros.html"><i class="fas fa-chevron-right"></i> Sobre Nosotros</a></li>
          <li><a href="faq.html"><i class="fas fa-chevron-right"></i> Preguntas Frecuentes</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Contacto</h3>
        <p><i class="fas fa-phone-alt"></i> +593 97 865 2638</p>
        <p><i class="fas fa-envelope"></i> info@fullstreamrec.com</p>
        <p><i class="fas fa-clock"></i> Lunes a Domingo: 08:00 - 22:00</p>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 FullStreamRec. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Menú hamburguesa
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      mobileMenu.classList.toggle('show');
      mobileMenu.classList.toggle('ocultarmenu');
      document.body.classList.toggle('no-scroll');
    });



    // Detectar cards en pantalla
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
        } else {
          entry.target.classList.remove("visible");
        }
      });
    }, {
      threshold: 0.1
    });

    // Inicialización de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCGhcDEti7CWmFFx1iVU_wyKuqN4q2hYeQ",
      authDomain: "site-fullstreamrec.firebaseapp.com",
      projectId: "site-fullstreamrec",
      storageBucket: "site-fullstreamrec.appspot.com",
      messagingSenderId: "161679433276",
      appId: "1:161679433276:web:2ecedce7e76a33ecfe6d39"
    };
    
    // Inicializar Firebase solo si no está inicializado
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    
    // Función para actualizar el enlace de WhatsApp y mostrar plan seleccionado
    function updateWhatsAppLink(productId, productName, planData, freefireId = null) {
      const [planName, planPrice] = planData.split("|");
      
      // Crear mensaje base
      let message = `*Nuevo Pedido*\n` +
                   `*Producto:* ${productName}\n` +
                   `*Plan:* ${planName}\n` +
                   `*Precio:* ${planPrice}\n`;
      
      // Agregar ID de Free Fire si está disponible
      if (freefireId && productName === 'Free Fire') {
        message += `*ID de Free Fire:* ${freefireId}\n`;
      }
      
      message += `\nPor favor confirma disponibilidad.`;
      
      const encodedMessage = encodeURIComponent(message);
      
      // Actualizar enlace de WhatsApp
      const whatsappBtn = document.getElementById(`btn-${productId}`);
      if (whatsappBtn) {
        whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${encodedMessage}`;
        const btnElement = document.getElementById(`buy-btn-${productId}`);
        if (btnElement) {
          btnElement.disabled = false;
        }
      }
      
      // Mostrar el plan seleccionado en la card con ID si es Free Fire
      const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
      if (selectedPlanElement) {
        selectedPlanElement.style.display = 'block';
        let displayText = planName;
        if (freefireId && productName === 'Free Fire') {
          displayText += ` (ID: ${freefireId})`;
        }
        selectedPlanElement.querySelector('.selected-plan-name').textContent = displayText;
        selectedPlanElement.querySelector('.selected-plan-price').textContent = planPrice;
      }
    }

    // evento de la X de quitar el plan
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('remove-plan-btn')) {
        const productId = e.target.dataset.productId;
        // 1. Eliminar del carrito todos los items de este producto
        cart = cart.filter(item => item.productId !== productId);
      
        updateCart();

        // Ocultar el contenedor del plan
        const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
        if (selectedPlanElement) {
          selectedPlanElement.style.display = 'none';
        }

        // Desactivar el botón de compra
        const buyBtn = document.getElementById(`buy-btn-${productId}`);
        if (buyBtn) {
          buyBtn.disabled = true;
        }

        // Limpiar el enlace de WhatsApp
        const whatsappBtn = document.getElementById(`btn-${productId}`);
        if (whatsappBtn) {
          whatsappBtn.href = '#';
        }
      }
    });

    // Crear modal global
    const globalModal = document.createElement('div');
    globalModal.className = 'global-modal';
    globalModal.innerHTML = `
      <div class="global-modal-content">
        <button class="global-modal-close">&times;</button>
        <div class="global-modal-header">
          <img id="global-modal-logo" loading="lazy" src="" alt="" class="global-modal-logo" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
          <h3 class="global-modal-title" id="global-modal-title"></h3>
        </div>
        <div class="global-plans-container" id="global-plans-container"></div>
      </div>
    `;
    document.body.appendChild(globalModal);

    // Funciones para manejar el modal
    function showGlobalModal(product) {
      const modalLogo = document.getElementById('global-modal-logo');
      const modalTitle = document.getElementById('global-modal-title');
      const plansContainer = document.getElementById('global-plans-container');
      
      modalLogo.src = product.logo;
      modalLogo.alt = product.name;
      modalTitle.textContent = `Planes de ${product.name}`;
      
      plansContainer.innerHTML = '';
      
      // Agregar campo de ID para Free Fire
      if (product.name === 'Free Fire') {
        const idInputContainer = document.createElement('div');
        idInputContainer.className = 'freefire-id-container';
        idInputContainer.innerHTML = `
          <div style="padding: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 20px;">
            <label for="freefire-id" style="display: block; margin-bottom: 10px; color: var(--light-color); font-weight: 600;">
              <i class="fas fa-gamepad"></i> ID de Free Fire:
            </label>
            <input type="text" id="freefire-id" placeholder="Ingresa tu ID de Free Fire" 
                   style="width: 100%; padding: 12px; border: 2px solid rgba(255, 255, 255, 0.1); 
                          border-radius: 8px; background-color: rgba(255, 255, 255, 0.05); 
                          color: var(--light-color); font-size: 16px; transition: var(--transition);"
                   onkeypress="return /[0-9]/.test(event.key)"
                   oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                   maxlength="12"
                   autocomplete="off">
            <small style="display: block; margin-top: 8px; color: rgba(255, 255, 255, 0.6); font-size: 14px;">
              <i class="fas fa-info-circle"></i> Ingresa tu ID numérico de Free Fire (solo números)
            </small>
          </div>
        `;
        plansContainer.appendChild(idInputContainer);
        
        // Estilos adicionales para el input
        const style = document.createElement('style');
        style.textContent = `
          #freefire-id:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 94, 102, 0.1);
          }
          #freefire-id::placeholder {
            color: rgba(255, 255, 255, 0.4);
          }
          #freefire-id.valid {
            border-color: #4CAF50 !important;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
          }
        `;
        document.head.appendChild(style);
        
        // Agregar validación en tiempo real
        const freefireInput = document.getElementById('freefire-id');
        freefireInput.addEventListener('input', function() {
          if (this.value.length >= 6) {
            this.classList.add('valid');
          } else {
            this.classList.remove('valid');
          }
        });
      }
      
      product.plans.forEach(plan => {
        const planItem = document.createElement('div');
        planItem.className = 'global-plan-item';
        // Usar la imagen específica del plan si existe, sino usar la imagen del producto
        const planImage = plan.image && plan.image.trim() !== '' ? plan.image : product.logo;
        planItem.innerHTML = `
          <div class="plan-info">
            <img src="${planImage}" alt="${plan.name}" class="plan-image" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
            <div class="global-plan-name">${plan.name}</div>
            <div class="global-plan-price">${plan.price}</div>
          </div>
          <button class="global-plan-select-btn" 
                  data-product-id="${product.id}"
                  data-product-name="${product.name}"
                  data-plan="${plan.name}|${plan.price}"
                  data-plan-image="${planImage}">
            <i class="fas fa-cart-plus"></i> Seleccionar
          </button>
        `;
        plansContainer.appendChild(planItem);
      });
      
      document.body.classList.add('modal-open');
      globalModal.classList.add('show');
    }

    function hideGlobalModal() {
      document.body.classList.remove('modal-open');
      globalModal.classList.remove('show');
    }

    // Eventos del modal
    document.querySelector('.global-modal-close').addEventListener('click', hideGlobalModal);
    globalModal.addEventListener('click', (e) => e.target === globalModal && hideGlobalModal());

    // Delegación de eventos para los botones de selección
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('global-plan-select-btn')) {
        const productId = e.target.dataset.productId;
        const productName = e.target.dataset.productName;
        const planData = e.target.dataset.plan;
        
        // Validación especial para Free Fire
        if (productName === 'Free Fire') {
          const freefireIdInput = document.getElementById('freefire-id');
          const freefireId = freefireIdInput ? freefireIdInput.value.trim() : '';
          
          if (!freefireId) {
            // Mostrar error si no se ingresó el ID
            freefireIdInput.style.borderColor = '#ff6b6b';
            freefireIdInput.focus();
            
            // Mostrar mensaje de error temporal
            const errorMsg = document.createElement('div');
            errorMsg.style.cssText = `
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background-color: rgba(255, 107, 107, 0.9);
              color: white;
              padding: 15px 25px;
              border-radius: 8px;
              font-weight: 600;
              z-index: 10001;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            errorMsg.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Por favor, ingresa tu ID de Free Fire';
            document.body.appendChild(errorMsg);
            
            setTimeout(() => {
              document.body.removeChild(errorMsg);
              freefireIdInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            }, 3000);
            
            return; // No continuar si no hay ID
          }
          
          if (freefireId.length < 6) {
            // Mostrar error si el ID es muy corto
            freefireIdInput.style.borderColor = '#ff6b6b';
            freefireIdInput.focus();
            
            const errorMsg = document.createElement('div');
            errorMsg.style.cssText = `
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background-color: rgba(255, 107, 107, 0.9);
              color: white;
              padding: 15px 25px;
              border-radius: 8px;
              font-weight: 600;
              z-index: 10001;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            errorMsg.innerHTML = '<i class="fas fa-exclamation-triangle"></i> El ID debe tener al menos 6 dígitos';
            document.body.appendChild(errorMsg);
            
            setTimeout(() => {
              document.body.removeChild(errorMsg);
              freefireIdInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            }, 3000);
            
            return; // No continuar si el ID es inválido
          }
          
          // Si llegamos aquí, el ID es válido, actualizar con el ID incluido
          updateWhatsAppLink(productId, productName, planData, freefireId);
        } else {
          // Para otros productos, usar la función normal
          updateWhatsAppLink(productId, productName, planData);
        }
        
        hideGlobalModal();
      }
    });

    // Carrito de compras
    let cart = [];

    // Modal del carrito (versión mejorada)
    const cartModal = document.createElement('div');
    cartModal.className = 'cart-modal';
    cartModal.innerHTML = `
      <button class="close-cart">&times;</button>
      <h3><i class="fas fa-shopping-cart"></i> Tu Carrito</h3>
      <div id="cartItems"></div>
      <div class="cart-total">Total: <span id="cartTotal">$0.00</span></div>
      <a id="whatsappCheckout" href="#" target="_blank">
        <button class="whatsapp-btn">
          <i class="fab fa-whatsapp"></i> Enviar Pedido
        </button>
      </a>
    `;
    document.body.appendChild(cartModal);

    // Eventos del carrito
    document.getElementById('cartIcon').addEventListener('click', () => {
      cartModal.classList.add('show');
      document.body.classList.add('modal-open');
    });

    document.querySelector('.close-cart').addEventListener('click', () => {
      cartModal.classList.remove('show');
      document.body.classList.remove('modal-open');
    });

    // Función para convertir precios a números
    function parsePrice(priceString) {
      // Elimina símbolos de moneda, espacios y comas (para decimales)
      const numericString = priceString.replace(/[^\d.]/g, '');
      return parseFloat(numericString) || 0;
    }

    // Función para formatear precios consistentemente
    function formatPrice(amount) {
      return amount.toLocaleString('es-EC', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2
      });
    }

    // Actualiza la visualización del carrito (versión mejorada)
    function updateCart() {
      const cartCount = document.getElementById('cartCount');
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      
      cartCount.textContent = cart.length;
      
      // Actualizar items del carrito con imágenes
      if (cart.length > 0) {
        cartItems.innerHTML = cart.map((item, index) => {
          const priceNumber = parsePrice(item.planPrice);
          return `
            <div class="cart-item">
              <img src="${item.productImage}" alt="${item.productName}" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
              <div class="cart-item-info">
                <strong>${item.productName}</strong>
                <span>${item.planName} - ${formatPrice(priceNumber)}</span>
              </div>
              <button onclick="removeFromCart(${index})" title="Eliminar"><i class="fas fa-times"></i></button>
            </div>
          `;
        }).join('');
      } else {
        cartItems.innerHTML = `
          <div class="cart-empty">
            <i class="fas fa-shopping-cart"></i>
            <p>Tu carrito está vacío</p>
          </div>
        `;
      }
      
      // Calcular total
      const total = cart.reduce((sum, item) => {
        return sum + parsePrice(item.planPrice);
      }, 0);
      
      // Mostrar total formateado
      cartTotal.textContent = formatPrice(total);
      
      // Actualizar enlace de WhatsApp
      const whatsappBtn = document.getElementById('whatsappCheckout');
      if (cart.length > 0) {
        const message = encodeURIComponent(
          `*Pedido desde FullStreamRec*\n\n` +
          cart.map(item => {
            const priceNumber = parsePrice(item.planPrice);
            return `➤ *${item.productName}*: ${item.planName} - ${formatPrice(priceNumber)}`;
          }).join('\n') +
          `\n\n*Total: ${formatPrice(total)}*` +
          `\n\nPor favor confirma disponibilidad.`
        );
        whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${message}`;
      } else {
        whatsappBtn.href = '#';
      }
    }

    // Funciones del carrito (actualizadas para incluir imagen)
    function addToCart(productId, productName, planName, planPrice, productLogo) {
      cart.push({
        productId,
        productName,
        planName,
        planPrice,
        productImage: productLogo || 'https://fakeimg.pl/100x100?text=Imagen'
      });
      updateCart();
    }

    function removeFromCart(index) {
      const removedItem = cart[index];
      cart.splice(index, 1);
      updateCart();
      
      // Verificar si el producto ya no está en el carrito
      const isProductInCart = cart.some(item => item.productId === removedItem.productId);
      if (!isProductInCart) {
        const selectedPlanElement = document.getElementById(`selected-plan-${removedItem.productId}`);
        if (selectedPlanElement) {
          selectedPlanElement.style.display = 'none';
        }
        
        const buyBtn = document.getElementById(`buy-btn-${removedItem.productId}`);
        if (buyBtn) {
          buyBtn.disabled = true;
        }
      }
    }

    // Manejar selección de planes (actualizado para obtener imagen)
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('global-plan-select-btn')) {
        const productId = e.target.dataset.productId;
        const productName = e.target.dataset.productName;
        const [planName, planPrice] = e.target.dataset.plan.split("|");
        const planImage = e.target.dataset.planImage || e.target.closest('.global-plan-item').querySelector('.plan-image')?.src || '';
        
        addToCart(productId, productName, planName.trim(), planPrice.trim(), planImage);
        hideGlobalModal();
      }
    });

    // Carga de productos
    document.addEventListener("DOMContentLoaded", () => {
      type();

      // Resaltar producto compartido desde la URL y actualizar metaetiquetas OG
      const urlParams = new URLSearchParams(window.location.search);
      const sharedProductId = urlParams.get('product');

      if (sharedProductId) {
        db.collection("products")
          .doc(sharedProductId)
          .get()
          .then(doc => {
            if (doc.exists) {
              const product = doc.data();
              const productId = doc.id;

              // Actualizar metaetiquetas Open Graph
              document.getElementById('dynamic-og-title').content = `${product.name} | FullStreamRec`;
              document.getElementById('dynamic-og-description').content = `Descubre ${product.name} en FullStreamRec. Planes económicos y confiables para streaming y recargas gamer en Ecuador.`;
              document.getElementById('dynamic-og-image').content = product.logo || 'https://fullstreamrec.com/logo.jpg';
              document.getElementById('dynamic-og-url').content = `${window.location.origin}?product=${productId}`;

              // Actualizar título de la página
              document.title = `${product.name} | FullStreamRec`;

              // Actualizar descripción SEO
              document.querySelector('meta[name="description"]').content = `Descubre ${product.name} en FullStreamRec. Planes económicos y confiables para streaming y recargas gamer en Ecuador.`;

              // Retrasar el resaltado y desplazamiento hasta que los productos estén cargados
              db.collection("products").where("visible", "in", [true, null]).get()
                .then(snapshot => {
                  // Esperar 500ms para asegurar que el DOM esté listo
                  setTimeout(() => {
                    const sharedCard = document.querySelector(`.card [data-product-id="${sharedProductId}"]`)?.closest('.card');
                    if (sharedCard) {
                      sharedCard.classList.add('card-highlight');
                      sharedCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                  }, 500);
                })
                .catch(error => {
                  console.error("Error al cargar productos:", error);
                });
            }
          })
          .catch(error => {
            console.error("Error al cargar producto compartido:", error);
          });
      }

      const container = document.getElementById("products-container");
      const categoryOrder = [
        "Streaming de Video", "IPTV", "Música", 
        "Videojuegos", "Herramientas Creativas","Combos"
      ];

      container.innerHTML = `<div class="cargando"></div>`;

      db.collection("products").where("visible", "in", [true, null]).get()
        .then(snapshot => {
          const productsByCategory = {};
          
          snapshot.docs.forEach(doc => {
            const product = doc.data();
            if (product.visible !== false) {
              productsByCategory[product.category] = productsByCategory[product.category] || [];
              productsByCategory[product.category].push({
                id: doc.id,
                ...product
              });
            }
          });

          container.innerHTML = "";

          categoryOrder.forEach(category => {
            if (productsByCategory[category]?.length > 0) {
              const categoryTitle = document.createElement("h2");
              categoryTitle.className = "category-title";
              categoryTitle.textContent = category;
              categoryTitle.id = category.toLowerCase().replace(/\s+/g, '-');
              container.appendChild(categoryTitle);

              const productsGrid = document.createElement("div");
              productsGrid.className = "products-grid";
              container.appendChild(productsGrid);

              productsByCategory[category].forEach(product => {
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                  <img src="${product.logo}" alt="${product.name}" 
                      loading="lazy" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
                  <h2>${product.name}</h2>
                  <div id="selected-plan-${product.id}" class="selected-plan-container" style="display: none;">
                    <div class="selected-plan">
                      <div>
                        <span class="selected-plan-name"></span> - 
                        <span class="selected-plan-price"></span>
                      </div>
                      <button class="remove-plan-btn" data-product-id="${product.id}" title="Quitar plan">
                        <i class="fas fa-times"></i>
                      </button>
                    </div>
                  </div>
                  <div class="card-buttons">
                    <button class="card-btn see-plans-btn" data-product-id="${product.id}">
                      <i class="fas fa-list"></i> Ver Planes
                    </button>
                    <a id="btn-${product.id}" target="_blank" href="#" rel="noopener" style="text-decoration: none;">
                      <button class="card-btn" id="buy-btn-${product.id}" disabled>
                        <i class="fas fa-shopping-cart"></i> Comprar Ahora
                      </button>
                    </a>
                  </div>
                  <button class="copy-btn" data-product-id="${product.id}" title="Copiar enlace del producto">
                    <i class="fas fa-link"></i> Compartir
                    <span class="copy-message">Copiado al portapapeles</span>
                  </button>
                `;
                productsGrid.appendChild(card);
              });
            }
          });

          // Manejador para copiar enlace
          container.addEventListener('click', (e) => {
            if (e.target.closest('.copy-btn')) {
              const button = e.target.closest('.copy-btn');
              const productId = button.dataset.productId;
              const product = [...snapshot.docs].find(doc => doc.id === productId)?.data();
              
              if (product) {
                const url = `${window.location.origin}?product=${productId}`;
                copyToClipboard(url);
                
                // Mostrar mensaje temporal
                const message = button.querySelector('.copy-message');
                message.classList.add('show');
                setTimeout(() => {
                  message.classList.remove('show');
                }, 2000);
              }
            }
          });

          // Función auxiliar para copiar al portapapeles
          function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
          }

          // Delegación de eventos para los botones "Ver Planes"
          container.addEventListener('click', (e) => {
            if (e.target.closest('.see-plans-btn')) {
              const productId = e.target.closest('.see-plans-btn').dataset.productId;
              const product = [...snapshot.docs]
                .find(doc => doc.id === productId)?.data();
              if (product) showGlobalModal({ id: productId, ...product });
            }
          });

          // Observador de cards
          document.querySelectorAll(".card").forEach(card => observer.observe(card));
        })
        .catch(error => {
          console.error("Error:", error);
          container.innerHTML = `
            <p style="color: var(--primary-color); text-align: center; padding: 2rem;">
              <i class="fas fa-exclamation-triangle"></i> Error al cargar productos. Contáctanos por 
              <a href="https://wa.me/593978652638" style="color: var(--primary-color);">WhatsApp</a>.
            </p>`;
        });
    });

    // Hacer funciones globales para el carrito
    window.addToCart = addToCart;
    window.removeFromCart = removeFromCart;
    window.updateCart = updateCart;
  </script>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="particles-config.js"></script>
</body>
</html>