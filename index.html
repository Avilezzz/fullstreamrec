<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Metaetiquetas generales (por defecto) -->
  <meta name="description" content="FullStreamRec ofrece las mejores cuentas de Netflix, Disney+, Spotify, IPTV y recargas gamer en Ecuador. Planes econ贸micos, servicio confiable y entrega inmediata.">
  <meta name="keywords" content="Netflix econ贸mico Ecuador, Disney+ barato Ecuador, Spotify Premium Ecuador, IPTV legal Ecuador, recargas juegos Ecuador, diamantes Free Fire Ecuador, planes streaming econ贸micos, servicios streaming Ecuador, FullStreamRec, IPTV estable sin cortes, d贸nde comprar streaming econ贸mico, mejores planes digitales Ecuador, servicio confiable recargas juegos">
  <meta name="author" content="FullStreamRec">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#000000">

  <!-- Open Graph por defecto -->
  <meta property="og:title" content="FullStreamRec | Servicios de Streaming en Ecuador">
  <meta property="og:description" content="Compra tus planes de streaming favoritos con FullStreamRec. Confiable, econ贸mico y con atenci贸n personalizada por WhatsApp.">
  <meta property="og:image" content="https://fullstreamrec.com/logo.jpg">
  <meta property="og:url" content="https://fullstreamrec.com">
  <meta property="og:type" content="website">

  <!-- Contenedor para metaetiquetas din谩micas -->
  <meta id="dynamic-og-title" property="og:title" content="">
  <meta id="dynamic-og-description" property="og:description" content="">
  <meta id="dynamic-og-image" property="og:image" content="">
  <meta id="dynamic-og-url" property="og:url" content="">

  <link rel="canonical" href="https://fullstreamrec.com">
  <link rel="icon" type="image/x-icon" href="logo.ico">
  <title>FullstreamRec</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "FullStreamRec",
      "image": "https://fullstreamrec.com/logo.jpg",
      "description": "Venta de servicios de streaming y recargas digitales en Ecuador",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "EC"
      },
      "telephone": "+593978652638",
      "url": "https://fullstreamrec.com",
      "priceRange": "$$",
      "openingHours": "Mo-Su 08:00-22:00",
      "sameAs": [
        "https://wa.me/593978652638"
      ]
    }
  </script>

  <style>
    :root {
      --primary-color: #ff5e66;
      --primary-dark: #e04b5a;
      --secondary-color: #00c6ff;
      --dark-color: #0a0a0a;
      --light-color: #ffffff;
      --gray-color: #f5f5f5;
      --dark-gray: #333333;
      --success-color: #25D366;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      --transition: all 0.3s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--dark-color);
      color: var(--light-color);
      line-height: 1.6;
      overflow-x: hidden;
    }
    html{
      scroll-behavior: smooth;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
      pointer-events: none;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    }

    /* Header */
    header {
      background-color: rgba(10, 10, 10, 0.9);
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 100;
      color: var(--light-color);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--light-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo span {
      color: var(--primary-color);
    }

    nav {
      display: flex;
      gap: 1.5rem;
    }

    nav a {
      text-decoration: none;
      color: var(--light-color);
      font-weight: 500;
      transition: var(--transition);
      position: relative;
      padding: 0.5rem 0;
    }

    nav a:hover {
      color: var(--primary-color);
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background-color: var(--primary-color);
      transition: var(--transition);
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Cart Icon */
    .cart-icon {
      position: relative;
      cursor: pointer;
      margin-left: 1.5rem;
      color: var(--light-color);
      transition: var(--transition);
    }

    .cart-icon:hover {
      color: var(--primary-color);
    }

    .cart-count {
      position: absolute;
      top: -8px;
      right: -8px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: bold;
    }

    /* Hamburger Menu */
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
      padding: 0.5rem;
      z-index: 101;
    }

    .hamburger div {
      width: 25px;
      height: 3px;
      background-color: var(--light-color);
      transition: var(--transition);
    }

    .hamburger.active div:nth-child(1) {
      transform: translateY(8px) rotate(45deg);
    }

    .hamburger.active div:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active div:nth-child(3) {
      transform: translateY(-8px) rotate(-45deg);
    }

    .mobile-menu {
      display: none;
      flex-direction: column;
      background-color: rgba(10, 10, 10, 0.95);
      padding: 2rem 1rem;
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100vh - 70px);
      z-index: 99;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    

    .mobile-menu.show {
      transform: translateX(0);
      
    }
.ocultarmenu{
      display: block;
    }
    .mobile-menu a {
      margin-bottom: 1rem;
      text-decoration: none;
      color: var(--light-color);
      padding: 1rem;
      border-radius: 8px;
      transition: var(--transition);
      font-weight: 500;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    body.no-scroll {
  overflow: hidden;
}

    .mobile-menu a:hover {
      background-color: rgba(255, 94, 102, 0.1);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .mobile-menu a i {
      font-size: 1.2rem;
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 5rem 1rem;
      min-height: 80vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(255, 94, 102, 0.1) 0%, rgba(10, 10, 10, 0.9) 70%);
      z-index: -1;
    }

    .hero h1 {
      display: none;
    }

    .hero h2 {
      font-size: clamp(1.8rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 2rem;
      line-height: 1.2;
      max-width: 900px;
    }

    .typed-text {
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .cursor {
      display: inline-block;
      background-color: var(--light-color);
      width: 3px;
      animation: blink 0.7s infinite;
    }

    @keyframes blink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0; }
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .hero-btn {
      padding: 0.8rem 1.8rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .primary-btn {
      background-color: var(--primary-color);
      color: var(--light-color);
      box-shadow: 0 4px 15px rgba(255, 94, 102, 0.4);
    }

    .primary-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 94, 102, 0.6);
    }

    .secondary-btn {
      background-color: transparent;
      color: var(--light-color);
      border: 2px solid var(--light-color);
    }

    .secondary-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-3px);
    }

    /* Main Content */
    main {
      padding: 3rem 1rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .category-title {
      font-size: clamp(1.5rem, 3vw, 2.2rem);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      padding-bottom: 1rem;
      margin: 3rem 0 2rem;
      text-align: center;
      color: var(--light-color);
    }

    .category-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
      border-radius: 2px;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 4rem;
    }

    /* Product Card */
    .card {
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      text-align: center;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.3s ease;
    }

    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 94, 102, 0.3);
    }

    .card img {
      max-width: 120px;
      height: 80px;
      object-fit: contain;
      margin: 0 auto 1.5rem;
      display: block;
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.3));
      transition: var(--transition);
    }

    .card:hover img {
      transform: scale(1.05);
    }

    .card h2 {
      font-size: 1.2rem;
      margin: 0.5rem 0 1rem;
      color: var(--light-color);
      font-weight: 600;
    }

    /* Selected Plan */
    .selected-plan-container {
      margin: 1rem 0;
      min-height: 40px;
      transition: var(--transition);
    }

    .selected-plan {
      background-color: rgba(255, 94, 102, 0.1);
      border-radius: 8px;
      padding: 0.8rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid var(--primary-color);
      transition: var(--transition);
    }

    .selected-plan:hover {
      background-color: rgba(255, 94, 102, 0.2);
    }

    .selected-plan-name {
      font-weight: 500;
      color: var(--light-color);
      font-size: 0.9rem;
    }

    .selected-plan-price {
      font-weight: 700;
      color: var(--primary-color);
      font-size: 1rem;
    }

    .remove-plan-btn {
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0 0.5rem;
      transition: var(--transition);
    }

    .remove-plan-btn:hover {
      color: var(--light-color);
      transform: scale(1.2);
    }

    /* Card Buttons */
    .card-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      margin-top: 1.5rem;
      justify-content: center;
      align-items: center;
    }

    .card-btn {
      background-color: var(--primary-color);
      color: var(--light-color);
      border: none;
      padding: 0.8rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .card-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 94, 102, 0.4);
    }

    .card-btn i {
      font-size: 1rem;
    }

    .card-btn[disabled] {
      opacity: 0.5;
      cursor: not-allowed;
      background-color: var(--dark-gray);
      transform: none !important;
      box-shadow: none !important;
    }

    .see-plans-btn {
      background-color: transparent;
      border: 1px solid var(--primary-color);
    }

    .see-plans-btn:hover {
      background-color: rgba(255, 94, 102, 0.1);
    }

    /* Copy Button */
    .copy-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      margin-top: 1rem;
      color: var(--light-color);
      transition: var(--transition);
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .copy-btn:hover {
      color: var(--primary-color);
      opacity: 1;
    }

    .copy-message {
      position: absolute;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary-color);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.7rem;
      white-space: nowrap;
      opacity: 0;
      transition: var(--transition);
      pointer-events: none;
    }

    .copy-message::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid var(--primary-color);
    }

    .copy-message.show {
      opacity: 1;
    }

    /* Highlight Animation */
    .card-highlight {
      animation: highlightPulse 3s ease forwards;
      position: relative;
    }

    .card-highlight::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 14px;
      z-index: -1;
      animation: borderRotate 0.3s linear;
    }

    @keyframes highlightPulse {
      0% {
        box-shadow: 0 0 30px rgba(255, 94, 102, 0.8), 0 0 10px rgba(255, 94, 102, 0.5);
        transform: scale(1);
      }
      50% {
        transform: scale(1.02);
      }
      100% {
        box-shadow: 0 0 20px rgba(255, 94, 102, 0.4), 0 0 5px rgba(255, 94, 102, 0.3);
        transform: scale(1);
      }
    }

    @keyframes borderRotate {
      100% {
        transform: rotate(1turn);
      }
    }

    /* Footer */
    footer {
      background-color: rgba(10, 10, 10, 0.9);
      color: var(--light-color);
      text-align: center;
      padding: 3rem 1rem;
      margin-top: 4rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      text-align: left;
    }

    .footer-column h3 {
      color: var(--primary-color);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      position: relative;
      display: inline-block;
    }

    .footer-column h3::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 40px;
      height: 2px;
      background-color: var(--primary-color);
    }

    .footer-column p {
      margin-bottom: 1rem;
      opacity: 0.8;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.8rem;
    }

    .footer-links a {
      color: var(--light-color);
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .footer-links a:hover {
      color: var(--primary-color);
      transform: translateX(5px);
    }

    .footer-links a i {
      font-size: 0.8rem;
    }

    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .social-links a {
      color: var(--light-color);
      background-color: rgba(255, 255, 255, 0.1);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .social-links a:hover {
      background-color: var(--primary-color);
      transform: translateY(-3px);
    }

    .copyright {
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      opacity: 0.7;
      font-size: 0.9rem;
    }

    footer a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Modal */
    .global-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
      box-sizing: border-box;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .global-modal.show {
      display: flex;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .global-modal-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transform: translateY(-20px);
      transition: transform 0.3s;
    }

    .global-modal.show .global-modal-content {
      transform: translateY(0);
    }

    .global-modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--primary-color);
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .global-modal-close:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: rotate(90deg);
    }

    .global-modal-header {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .global-modal-logo {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 12px;
      background-color: var(--light-color);
      padding: 5px;
      box-shadow: var(--shadow);
    }

    .global-modal-title {
      margin: 0;
      color: var(--light-color);
      font-size: 1.3rem;
      font-weight: 600;
    }

    .global-plans-container {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      max-width: 900px;
      margin: 0 auto;
    }

    .global-plan-item {
      display: flex;
      flex-direction: column;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
      border-radius: 12px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
      text-align: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .global-plan-item:hover {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
      border-color: rgba(255, 94, 102, 0.4);
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 35px rgba(255, 94, 102, 0.2), 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .plan-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }

    .plan-image {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 12px;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 8px;
      margin-bottom: 10px;
    }

    .global-plan-name {
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--light-color);
      font-size: 1rem;
      line-height: 1.3;
      text-align: center;
    }

    .global-plan-price {
      color: var(--primary-color);
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .global-plan-select-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      font-size: 0.95rem;
    }

    .global-plan-select-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 94, 102, 0.4);
    }

    /* Cart Modal */
    .cart-modal {
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      max-width: 450px;
      height: 100%;
      background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
      z-index: 1001;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      padding: 1.5rem;
      box-shadow: -5px 0 25px rgba(0, 0, 0, 0.4);
      color: white;
      overflow-y: auto;
      border-left: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .cart-modal.show {
      transform: translateX(0);
    }

    .cart-modal h3 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      text-align: center;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--primary-color);
    }

    .cart-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: var(--transition);
    }

    .cart-item:hover {
      background-color: rgba(255, 255, 255, 0.03);
    }

    .cart-item img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 8px;
      background-color: white;
      padding: 5px;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-info strong {
      color: var(--primary-color);
      display: block;
      margin-bottom: 0.3rem;
      font-weight: 500;
    }

    .cart-item-info span {
      font-size: 0.9rem;
      color: #ccc;
    }

    .cart-item button {
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .cart-item button:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: scale(1.2);
    }

    .cart-total {
      font-weight: bold;
      margin: 1.5rem 0;
      text-align: right;
      font-size: 1.3rem;
      color: var(--primary-color);
    }

    #whatsappCheckout {
      text-decoration: none;
      display: block;
    }

    #whatsappCheckout button {
      background-color: var(--success-color);
      color: white;
      border: none;
      padding: 1rem;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-weight: 600;
    }

    #whatsappCheckout button:hover {
      background-color: #128C7E;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(18, 140, 126, 0.4);
    }

    .close-cart {
      background: none;
      border: none;
      font-size: 2rem;
      position: absolute;
      right: 1.5rem;
      top: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-cart:hover {
      background-color: rgba(255, 94, 102, 0.1);
      transform: rotate(90deg);
    }

    /* Empty Cart */
    .cart-empty {
      text-align: center;
      padding: 2rem 0;
      color: #888;
    }

    .cart-empty svg {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--primary-color);
    }

    .cart-empty p {
      margin-top: 1rem;
    }

    /* Loading Spinner */
    .cargando {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 2rem auto;
    }

    .cargando:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid transparent;
      border-top-color: var(--light-color);
      border-bottom-color: var(--primary-color);
      animation: neonSpin 1.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      box-shadow: 0 0 15px rgba(0, 255, 234, 0.8),
                  0 0 30px rgba(255, 0, 122, 0.6),
                  0 0 50px rgba(0, 255, 234, 0.4),
                  inset 0 0 10px rgba(255, 0, 122, 0.5);
    }

    @keyframes neonSpin {
      0% {
        transform: rotate(0deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(0, 255, 234, 0.4),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
      50% {
        transform: rotate(180deg) scale(1.1);
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.8),
                    0 0 50px rgba(255, 0, 122, 0.8),
                    0 0 70px rgba(255, 255, 255, 0.8),
                    inset 0 0 15px rgba(255, 0, 122, 0.7);
      }
      100% {
        transform: rotate(360deg) scale(1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.8),
                    0 0 30px rgba(255, 0, 122, 0.6),
                    0 0 50px rgba(255, 255, 255, 0.8),
                    inset 0 0 10px rgba(255, 0, 122, 0.5);
      }
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .products-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      .products-grid {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1.5rem;
      }

      .global-plans-container {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        padding: 15px;
      }

      nav {
        display: none;
      }

      .hamburger {
        display: flex;
      }

      .hero {
        padding: 3rem 1rem;
        min-height: 70vh;
      }

      .hero-buttons {
        flex-direction: column;
        width: 100%;
      }

      .hero-btn {
        width: 100%;
        justify-content: center;
      }

      .footer-content {
        grid-template-columns: 1fr;
      }

      .footer-column {
        text-align: center;
      }

      .footer-column h3::after {
        left: 50%;
        transform: translateX(-50%);
      }

      .footer-links a {
        justify-content: center;
      }

      .social-links {
        justify-content: center;
      }
    }

    /* Chatbot Styles */
    .chatbot-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(255, 94, 102, 0.4);
      transition: all 0.3s ease;
      z-index: 1000;
      animation: pulse 2s infinite;
    }

    .chatbot-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 25px rgba(255, 94, 102, 0.6);
    }

    .chatbot-button i {
      font-size: 24px;
      color: white;
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff3333;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      animation: bounce 1s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 4px 20px rgba(255, 94, 102, 0.4); }
      50% { box-shadow: 0 4px 25px rgba(255, 94, 102, 0.8); }
      100% { box-shadow: 0 4px 20px rgba(255, 94, 102, 0.4); }
    }

    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }

    .chat-container {
      position: fixed;
      bottom: 100px;
      right: 20px;
      width: 380px;
      height: 500px;
      background: linear-gradient(145deg, #1a1a1a, #0a0a0a);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: none;
      flex-direction: column;
      z-index: 1001;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow: hidden;
    }

    .chat-container.show {
      display: flex;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { 
        transform: translateY(20px);
        opacity: 0;
      }
      to { 
        transform: translateY(0);
        opacity: 1;
      }
    }

    .chat-header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 16px 16px 0 0;
    }

    .chat-header-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chat-logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }

    .chat-header h4 {
      margin: 0;
      color: white;
      font-size: 16px;
      font-weight: 600;
    }

    .chat-status {
      color: rgba(255, 255, 255, 0.8);
      font-size: 12px;
    }

    .close-chat-btn {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .close-chat-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .chat-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .message {
      display: flex;
      gap: 10px;
      max-width: 85%;
    }

    .bot-message {
      align-self: flex-start;
    }

    .user-message {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .message-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }

    .message-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .user-message .message-avatar {
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .message-content {
      background: rgba(255, 255, 255, 0.05);
      padding: 12px 16px;
      border-radius: 18px;
      color: var(--light-color);
      line-height: 1.4;
      position: relative;
    }

    .user-message .message-content {
      background: var(--primary-color);
      color: white;
    }

    .message-content p {
      margin: 0;
      font-size: 14px;
    }

    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .quick-action {
      background: rgba(255, 94, 102, 0.1);
      border: 1px solid rgba(255, 94, 102, 0.3);
      color: var(--primary-color);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
    }

    .quick-action:hover {
      background: var(--primary-color);
      color: white;
    }

    .chat-input-container {
      padding: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    #chat-input {
      flex: 1;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 25px;
      padding: 12px 16px;
      color: var(--light-color);
      font-size: 14px;
      outline: none;
      transition: var(--transition);
    }

    #chat-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(255, 94, 102, 0.1);
    }

    #chat-input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .send-btn {
      background: var(--primary-color);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .send-btn:hover {
      background: var(--primary-dark);
      transform: scale(1.1);
    }

    .send-btn i {
      color: white;
      font-size: 16px;
    }

    .typing-indicator {
      display: flex;
      gap: 4px;
      align-items: center;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 18px;
      margin: 10px 0;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--primary-color);
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.4;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    @media (max-width: 576px) {
      .products-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
        padding: 0 1rem;
      }

      .global-modal-content {
        padding: 15px;
        margin: 10px;
      }

      .global-plans-container {
        grid-template-columns: 1fr;
        padding: 15px;
        gap: 15px;
      }

      .global-plan-item {
        padding: 15px;
      }

      .global-plan-select-btn {
        width: 100%;
        justify-content: center;
        padding: 10px 15px;
      }

      .cart-modal {
        max-width: 100%;
        padding: 1rem;
      }

      .chat-container {
        width: 95%;
        right: 2.5%;
        bottom: 90px;
        height: 70vh;
        max-height: 500px;
      }

      .chatbot-button {
        bottom: 15px;
        right: 15px;
        width: 55px;
        height: 55px;
      }

      .chatbot-button i {
        font-size: 20px;
      }
    }

    /* No scroll when modal is open */
    body.modal-open {
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header>
    <div class="navbar">
      <div class="logo">
        <img src="logo.jpg" alt="" width="36px" height="36px">
        FullStreamRec
      </div>
      <nav>
        <a href="contacto.html"><i class="fas fa-envelope"></i> Contacto</a>
        <a href="sobre-nosotros.html"><i class="fas fa-users"></i> Sobre Nosotros</a>
        <a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a>
      </nav>
      <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
      </div>
      <div class="hamburger" id="hamburger">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="contacto.html"><i class="fas fa-envelope"></i> Contacto</a>
      <a href="sobre-nosotros.html"><i class="fas fa-users"></i> Sobre Nosotros</a>
      <a href="faq.html"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <h1>
      FullStreamRec - Servicios de Streaming en Ecuador: Netflix, Disney+, Spotify, IPTV
    </h1>
    <h2><span class="typed-text"></span><span class="cursor">&nbsp;</span></h2>
    <div class="hero-buttons">
      <a href="#products-container" class="hero-btn primary-btn">
        <i class="fas fa-play"></i> Ver Planes de Streaming
      </a>
      <a href="https://wa.me/593978652638" target="_blank" class="hero-btn secondary-btn">
        <i class="fab fa-whatsapp"></i> Contactar por WhatsApp
      </a>
    </div>
  </section>

  <!-- Main Content -->
  <main id="products-container"></main>

  <!-- Chatbot Flotante -->
  <div id="chatbot-button" class="chatbot-button">
    <i class="fas fa-comments"></i>
    <div class="notification-badge" id="chat-notification">1</div>
  </div>

  <!-- Chat Interface -->
  <div id="chat-container" class="chat-container">
    <div class="chat-header">
      <div class="chat-header-info">
        <img src="logo.jpg" alt="FullStreamRec" class="chat-logo">
        <div>
          <h4>FullStreamRec Assistant</h4>
          <span class="chat-status">En l铆nea</span>
        </div>
      </div>
      <button id="close-chat" class="close-chat-btn">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="chat-messages" id="chat-messages">
      <div class="message bot-message">
        <div class="message-avatar">
          <img src="logo.jpg" alt="Bot">
        </div>
        <div class="message-content">
          <p>隆Hola!  Soy el asistente virtual de FullStreamRec. 驴En qu茅 puedo ayudarte hoy?</p>
          <div class="quick-actions">
            <button class="quick-action" data-action="servicios">Ver Servicios</button>
            <button class="quick-action" data-action="precios">Consultar Precios</button>
            <button class="quick-action" data-action="freefire">Free Fire</button>
            <button class="quick-action" data-action="contacto">Contacto</button>
          </div>
        </div>
      </div>
    </div>
    <div class="chat-input-container">
      <input type="text" id="chat-input" placeholder="Escribe tu mensaje..." maxlength="500">
      <button id="send-message" class="send-btn">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>FullStreamRec</h3>
        <p>Tu mejor opci贸n para servicios de streaming y recargas digitales en Ecuador.</p>
        <div class="social-links">
          <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
          <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://wa.me/593978652638" target="_blank"><i class="fab fa-whatsapp"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h3>Enlaces R谩pidos</h3>
        <ul class="footer-links">
          <li><a href="#"><i class="fas fa-chevron-right"></i> Inicio</a></li>
          <li><a href="contacto.html"><i class="fas fa-chevron-right"></i> Contacto</a></li>
          <li><a href="sobre-nosotros.html"><i class="fas fa-chevron-right"></i> Sobre Nosotros</a></li>
          <li><a href="faq.html"><i class="fas fa-chevron-right"></i> Preguntas Frecuentes</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Contacto</h3>
        <p><i class="fas fa-phone-alt"></i> +593 97 865 2638</p>
        <p><i class="fas fa-envelope"></i> info@fullstreamrec.com</p>
        <p><i class="fas fa-clock"></i> Lunes a Domingo: 08:00 - 22:00</p>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 FullStreamRec. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Men煤 hamburguesa
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      mobileMenu.classList.toggle('show');
      mobileMenu.classList.toggle('ocultarmenu');
      document.body.classList.toggle('no-scroll');
    });

    // Efecto de m谩quina de escribir
    const typedText = document.querySelector(".typed-text");
    const words = [
      "Servicios de Streaming en Ecuador.", 
      "Planes para Netflix, Disney+, Spotify y m谩s.",
      "Recargas de tus videojuegos favoritos.", 
      "隆Atenci贸n personalizada por WhatsApp!"
    ];
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;

    function type() {
      const current = words[wordIndex];
      if (isDeleting) {
        typedText.textContent = current.substring(0, charIndex--);
      } else {
        typedText.textContent = current.substring(0, charIndex++);
      }

      if (!isDeleting && charIndex === current.length) {
        isDeleting = true;
        setTimeout(type, 1500);
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
        setTimeout(type, 500);
      } else {
        setTimeout(type, isDeleting ? 50 : 100);
      }
    }

    // Detectar cards en pantalla
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
        } else {
          entry.target.classList.remove("visible");
        }
      });
    }, {
      threshold: 0.1
    });

    // Inicializaci贸n de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCGhcDEti7CWmFFx1iVU_wyKuqN4q2hYeQ",
      authDomain: "site-fullstreamrec.firebaseapp.com",
      projectId: "site-fullstreamrec",
      storageBucket: "site-fullstreamrec.appspot.com",
      messagingSenderId: "161679433276",
      appId: "1:161679433276:web:2ecedce7e76a33ecfe6d39"
    };
    
    // Inicializar Firebase solo si no est谩 inicializado
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    
    // Funci贸n para actualizar el enlace de WhatsApp y mostrar plan seleccionado
    function updateWhatsAppLink(productId, productName, planData, freefireId = null) {
      const [planName, planPrice] = planData.split("|");
      
      // Crear mensaje base
      let message = `*Nuevo Pedido*\n` +
                   `*Producto:* ${productName}\n` +
                   `*Plan:* ${planName}\n` +
                   `*Precio:* ${planPrice}\n`;
      
      // Agregar ID de Free Fire si est谩 disponible
      if (freefireId && productName === 'Free Fire') {
        message += `*ID de Free Fire:* ${freefireId}\n`;
      }
      
      message += `\nPor favor confirma disponibilidad.`;
      
      const encodedMessage = encodeURIComponent(message);
      
      // Actualizar enlace de WhatsApp
      const whatsappBtn = document.getElementById(`btn-${productId}`);
      if (whatsappBtn) {
        whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${encodedMessage}`;
        const btnElement = document.getElementById(`buy-btn-${productId}`);
        if (btnElement) {
          btnElement.disabled = false;
        }
      }
      
      // Mostrar el plan seleccionado en la card con ID si es Free Fire
      const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
      if (selectedPlanElement) {
        selectedPlanElement.style.display = 'block';
        let displayText = planName;
        if (freefireId && productName === 'Free Fire') {
          displayText += ` (ID: ${freefireId})`;
        }
        selectedPlanElement.querySelector('.selected-plan-name').textContent = displayText;
        selectedPlanElement.querySelector('.selected-plan-price').textContent = planPrice;
      }
    }

    // evento de la X de quitar el plan
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('remove-plan-btn')) {
        const productId = e.target.dataset.productId;
        // 1. Eliminar del carrito todos los items de este producto
        cart = cart.filter(item => item.productId !== productId);
      
        updateCart();

        // Ocultar el contenedor del plan
        const selectedPlanElement = document.getElementById(`selected-plan-${productId}`);
        if (selectedPlanElement) {
          selectedPlanElement.style.display = 'none';
        }

        // Desactivar el bot贸n de compra
        const buyBtn = document.getElementById(`buy-btn-${productId}`);
        if (buyBtn) {
          buyBtn.disabled = true;
        }

        // Limpiar el enlace de WhatsApp
        const whatsappBtn = document.getElementById(`btn-${productId}`);
        if (whatsappBtn) {
          whatsappBtn.href = '#';
        }
      }
    });

    // Crear modal global
    const globalModal = document.createElement('div');
    globalModal.className = 'global-modal';
    globalModal.innerHTML = `
      <div class="global-modal-content">
        <button class="global-modal-close">&times;</button>
        <div class="global-modal-header">
          <img id="global-modal-logo" loading="lazy" src="" alt="" class="global-modal-logo" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
          <h3 class="global-modal-title" id="global-modal-title"></h3>
        </div>
        <div class="global-plans-container" id="global-plans-container"></div>
      </div>
    `;
    document.body.appendChild(globalModal);

    // Funciones para manejar el modal
    function showGlobalModal(product) {
      const modalLogo = document.getElementById('global-modal-logo');
      const modalTitle = document.getElementById('global-modal-title');
      const plansContainer = document.getElementById('global-plans-container');
      
      modalLogo.src = product.logo;
      modalLogo.alt = product.name;
      modalTitle.textContent = `Planes de ${product.name}`;
      
      plansContainer.innerHTML = '';
      
      // Agregar campo de ID para Free Fire
      if (product.name === 'Free Fire') {
        const idInputContainer = document.createElement('div');
        idInputContainer.className = 'freefire-id-container';
        idInputContainer.innerHTML = `
          <div style="padding: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 20px;">
            <label for="freefire-id" style="display: block; margin-bottom: 10px; color: var(--light-color); font-weight: 600;">
              <i class="fas fa-gamepad"></i> ID de Free Fire:
            </label>
            <input type="text" id="freefire-id" placeholder="Ingresa tu ID de Free Fire" 
                   style="width: 100%; padding: 12px; border: 2px solid rgba(255, 255, 255, 0.1); 
                          border-radius: 8px; background-color: rgba(255, 255, 255, 0.05); 
                          color: var(--light-color); font-size: 16px; transition: var(--transition);"
                   onkeypress="return /[0-9]/.test(event.key)"
                   oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                   maxlength="12"
                   autocomplete="off">
            <small style="display: block; margin-top: 8px; color: rgba(255, 255, 255, 0.6); font-size: 14px;">
              <i class="fas fa-info-circle"></i> Ingresa tu ID num茅rico de Free Fire (solo n煤meros)
            </small>
          </div>
        `;
        plansContainer.appendChild(idInputContainer);
        
        // Estilos adicionales para el input
        const style = document.createElement('style');
        style.textContent = `
          #freefire-id:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 94, 102, 0.1);
          }
          #freefire-id::placeholder {
            color: rgba(255, 255, 255, 0.4);
          }
          #freefire-id.valid {
            border-color: #4CAF50 !important;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
          }
        `;
        document.head.appendChild(style);
        
        // Agregar validaci贸n en tiempo real
        const freefireInput = document.getElementById('freefire-id');
        freefireInput.addEventListener('input', function() {
          if (this.value.length >= 6) {
            this.classList.add('valid');
          } else {
            this.classList.remove('valid');
          }
        });
      }
      
      product.plans.forEach(plan => {
        const planItem = document.createElement('div');
        planItem.className = 'global-plan-item';
        // Usar la imagen espec铆fica del plan si existe, sino usar la imagen del producto
        const planImage = plan.image && plan.image.trim() !== '' ? plan.image : product.logo;
        planItem.innerHTML = `
          <div class="plan-info">
            <img src="${planImage}" alt="${plan.name}" class="plan-image" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
            <div class="global-plan-name">${plan.name}</div>
            <div class="global-plan-price">${plan.price}</div>
          </div>
          <button class="global-plan-select-btn" 
                  data-product-id="${product.id}"
                  data-product-name="${product.name}"
                  data-plan="${plan.name}|${plan.price}"
                  data-plan-image="${planImage}">
            <i class="fas fa-cart-plus"></i> Seleccionar
          </button>
        `;
        plansContainer.appendChild(planItem);
      });
      
      document.body.classList.add('modal-open');
      globalModal.classList.add('show');
    }

    function hideGlobalModal() {
      document.body.classList.remove('modal-open');
      globalModal.classList.remove('show');
    }

    // Eventos del modal
    document.querySelector('.global-modal-close').addEventListener('click', hideGlobalModal);
    globalModal.addEventListener('click', (e) => e.target === globalModal && hideGlobalModal());

    // Delegaci贸n de eventos para los botones de selecci贸n
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('global-plan-select-btn')) {
        const productId = e.target.dataset.productId;
        const productName = e.target.dataset.productName;
        const planData = e.target.dataset.plan;
        
        // Validaci贸n especial para Free Fire
        if (productName === 'Free Fire') {
          const freefireIdInput = document.getElementById('freefire-id');
          const freefireId = freefireIdInput ? freefireIdInput.value.trim() : '';
          
          if (!freefireId) {
            // Mostrar error si no se ingres贸 el ID
            freefireIdInput.style.borderColor = '#ff6b6b';
            freefireIdInput.focus();
            
            // Mostrar mensaje de error temporal
            const errorMsg = document.createElement('div');
            errorMsg.style.cssText = `
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background-color: rgba(255, 107, 107, 0.9);
              color: white;
              padding: 15px 25px;
              border-radius: 8px;
              font-weight: 600;
              z-index: 10001;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            errorMsg.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Por favor, ingresa tu ID de Free Fire';
            document.body.appendChild(errorMsg);
            
            setTimeout(() => {
              document.body.removeChild(errorMsg);
              freefireIdInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            }, 3000);
            
            return; // No continuar si no hay ID
          }
          
          if (freefireId.length < 6) {
            // Mostrar error si el ID es muy corto
            freefireIdInput.style.borderColor = '#ff6b6b';
            freefireIdInput.focus();
            
            const errorMsg = document.createElement('div');
            errorMsg.style.cssText = `
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background-color: rgba(255, 107, 107, 0.9);
              color: white;
              padding: 15px 25px;
              border-radius: 8px;
              font-weight: 600;
              z-index: 10001;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            errorMsg.innerHTML = '<i class="fas fa-exclamation-triangle"></i> El ID debe tener al menos 6 d铆gitos';
            document.body.appendChild(errorMsg);
            
            setTimeout(() => {
              document.body.removeChild(errorMsg);
              freefireIdInput.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            }, 3000);
            
            return; // No continuar si el ID es inv谩lido
          }
          
          // Si llegamos aqu铆, el ID es v谩lido, actualizar con el ID incluido
          updateWhatsAppLink(productId, productName, planData, freefireId);
        } else {
          // Para otros productos, usar la funci贸n normal
          updateWhatsAppLink(productId, productName, planData);
        }
        
        hideGlobalModal();
      }
    });

    // Carrito de compras
    let cart = [];

    // Modal del carrito (versi贸n mejorada)
    const cartModal = document.createElement('div');
    cartModal.className = 'cart-modal';
    cartModal.innerHTML = `
      <button class="close-cart">&times;</button>
      <h3><i class="fas fa-shopping-cart"></i> Tu Carrito</h3>
      <div id="cartItems"></div>
      <div class="cart-total">Total: <span id="cartTotal">$0.00</span></div>
      <a id="whatsappCheckout" href="#" target="_blank">
        <button class="whatsapp-btn">
          <i class="fab fa-whatsapp"></i> Enviar Pedido
        </button>
      </a>
    `;
    document.body.appendChild(cartModal);

    // Eventos del carrito
    document.getElementById('cartIcon').addEventListener('click', () => {
      cartModal.classList.add('show');
      document.body.classList.add('modal-open');
    });

    document.querySelector('.close-cart').addEventListener('click', () => {
      cartModal.classList.remove('show');
      document.body.classList.remove('modal-open');
    });

    // Funci贸n para convertir precios a n煤meros
    function parsePrice(priceString) {
      // Elimina s铆mbolos de moneda, espacios y comas (para decimales)
      const numericString = priceString.replace(/[^\d.]/g, '');
      return parseFloat(numericString) || 0;
    }

    // Funci贸n para formatear precios consistentemente
    function formatPrice(amount) {
      return amount.toLocaleString('es-EC', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2
      });
    }

    // Actualiza la visualizaci贸n del carrito (versi贸n mejorada)
    function updateCart() {
      const cartCount = document.getElementById('cartCount');
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      
      cartCount.textContent = cart.length;
      
      // Actualizar items del carrito con im谩genes
      if (cart.length > 0) {
        cartItems.innerHTML = cart.map((item, index) => {
          const priceNumber = parsePrice(item.planPrice);
          return `
            <div class="cart-item">
              <img src="${item.productImage}" alt="${item.productName}" onerror="this.src='https://fakeimg.pl/100x100?text=Imagen'">
              <div class="cart-item-info">
                <strong>${item.productName}</strong>
                <span>${item.planName} - ${formatPrice(priceNumber)}</span>
              </div>
              <button onclick="removeFromCart(${index})" title="Eliminar"><i class="fas fa-times"></i></button>
            </div>
          `;
        }).join('');
      } else {
        cartItems.innerHTML = `
          <div class="cart-empty">
            <i class="fas fa-shopping-cart"></i>
            <p>Tu carrito est谩 vac铆o</p>
          </div>
        `;
      }
      
      // Calcular total
      const total = cart.reduce((sum, item) => {
        return sum + parsePrice(item.planPrice);
      }, 0);
      
      // Mostrar total formateado
      cartTotal.textContent = formatPrice(total);
      
      // Actualizar enlace de WhatsApp
      const whatsappBtn = document.getElementById('whatsappCheckout');
      if (cart.length > 0) {
        const message = encodeURIComponent(
          `*Pedido desde FullStreamRec*\n\n` +
          cart.map(item => {
            const priceNumber = parsePrice(item.planPrice);
            return ` *${item.productName}*: ${item.planName} - ${formatPrice(priceNumber)}`;
          }).join('\n') +
          `\n\n*Total: ${formatPrice(total)}*` +
          `\n\nPor favor confirma disponibilidad.`
        );
        whatsappBtn.href = `https://api.whatsapp.com/send?phone=593978652638&text=${message}`;
      } else {
        whatsappBtn.href = '#';
      }
    }

    // Funciones del carrito (actualizadas para incluir imagen)
    function addToCart(productId, productName, planName, planPrice, productLogo) {
      cart.push({
        productId,
        productName,
        planName,
        planPrice,
        productImage: productLogo || 'https://fakeimg.pl/100x100?text=Imagen'
      });
      updateCart();
    }

    function removeFromCart(index) {
      const removedItem = cart[index];
      cart.splice(index, 1);
      updateCart();
      
      // Verificar si el producto ya no est谩 en el carrito
      const isProductInCart = cart.some(item => item.productId === removedItem.productId);
      if (!isProductInCart) {
        const selectedPlanElement = document.getElementById(`selected-plan-${removedItem.productId}`);
        if (selectedPlanElement) {
          selectedPlanElement.style.display = 'none';
        }
        
        const buyBtn = document.getElementById(`buy-btn-${removedItem.productId}`);
        if (buyBtn) {
          buyBtn.disabled = true;
        }
      }
    }

    // Manejar selecci贸n de planes (actualizado para obtener imagen)
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('global-plan-select-btn')) {
        const productId = e.target.dataset.productId;
        const productName = e.target.dataset.productName;
        const [planName, planPrice] = e.target.dataset.plan.split("|");
        const planImage = e.target.dataset.planImage || e.target.closest('.global-plan-item').querySelector('.plan-image')?.src || '';
        
        addToCart(productId, productName, planName.trim(), planPrice.trim(), planImage);
        hideGlobalModal();
      }
    });

    // Carga de productos
    document.addEventListener("DOMContentLoaded", () => {
      type();

      // Resaltar producto compartido desde la URL y actualizar metaetiquetas OG
      const urlParams = new URLSearchParams(window.location.search);
      const sharedProductId = urlParams.get('product');

      if (sharedProductId) {
        db.collection("products")
          .doc(sharedProductId)
          .get()
          .then(doc => {
            if (doc.exists) {
              const product = doc.data();
              const productId = doc.id;

              // Actualizar metaetiquetas Open Graph
              document.getElementById('dynamic-og-title').content = `${product.name} | FullStreamRec`;
              document.getElementById('dynamic-og-description').content = `Descubre ${product.name} en FullStreamRec. Planes econ贸micos y confiables para streaming y recargas gamer en Ecuador.`;
              document.getElementById('dynamic-og-image').content = product.logo || 'https://fullstreamrec.com/logo.jpg';
              document.getElementById('dynamic-og-url').content = `${window.location.origin}?product=${productId}`;

              // Actualizar t铆tulo de la p谩gina
              document.title = `${product.name} | FullStreamRec`;

              // Actualizar descripci贸n SEO
              document.querySelector('meta[name="description"]').content = `Descubre ${product.name} en FullStreamRec. Planes econ贸micos y confiables para streaming y recargas gamer en Ecuador.`;

              // Retrasar el resaltado y desplazamiento hasta que los productos est茅n cargados
              db.collection("products").where("visible", "in", [true, null]).get()
                .then(snapshot => {
                  // Esperar 500ms para asegurar que el DOM est茅 listo
                  setTimeout(() => {
                    const sharedCard = document.querySelector(`.card [data-product-id="${sharedProductId}"]`)?.closest('.card');
                    if (sharedCard) {
                      sharedCard.classList.add('card-highlight');
                      sharedCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                  }, 500);
                })
                .catch(error => {
                  console.error("Error al cargar productos:", error);
                });
            }
          })
          .catch(error => {
            console.error("Error al cargar producto compartido:", error);
          });
      }

      const container = document.getElementById("products-container");
      const categoryOrder = [
        "Streaming de Video", "IPTV", "M煤sica", 
        "Videojuegos", "Herramientas Creativas","Combos"
      ];

      container.innerHTML = `<div class="cargando"></div>`;

      db.collection("products").where("visible", "in", [true, null]).get()
        .then(snapshot => {
          const productsByCategory = {};
          
          snapshot.docs.forEach(doc => {
            const product = doc.data();
            if (product.visible !== false) {
              productsByCategory[product.category] = productsByCategory[product.category] || [];
              productsByCategory[product.category].push({
                id: doc.id,
                ...product
              });
            }
          });

          container.innerHTML = "";

          categoryOrder.forEach(category => {
            if (productsByCategory[category]?.length > 0) {
              const categoryTitle = document.createElement("h2");
              categoryTitle.className = "category-title";
              categoryTitle.textContent = category;
              categoryTitle.id = category.toLowerCase().replace(/\s+/g, '-');
              container.appendChild(categoryTitle);

              const productsGrid = document.createElement("div");
              productsGrid.className = "products-grid";
              container.appendChild(productsGrid);

              productsByCategory[category].forEach(product => {
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                  <img src="${product.logo}" alt="${product.name}" 
                      loading="lazy" onerror="this.src='https://fakeimg.pl/400x200?text=IMAGEN+NO+DISPONIBLE'" />
                  <h2>${product.name}</h2>
                  <div id="selected-plan-${product.id}" class="selected-plan-container" style="display: none;">
                    <div class="selected-plan">
                      <div>
                        <span class="selected-plan-name"></span> - 
                        <span class="selected-plan-price"></span>
                      </div>
                      <button class="remove-plan-btn" data-product-id="${product.id}" title="Quitar plan">
                        <i class="fas fa-times"></i>
                      </button>
                    </div>
                  </div>
                  <div class="card-buttons">
                    <button class="card-btn see-plans-btn" data-product-id="${product.id}">
                      <i class="fas fa-list"></i> Ver Planes
                    </button>
                    <a id="btn-${product.id}" target="_blank" href="#" rel="noopener" style="text-decoration: none;">
                      <button class="card-btn" id="buy-btn-${product.id}" disabled>
                        <i class="fas fa-shopping-cart"></i> Comprar Ahora
                      </button>
                    </a>
                  </div>
                  <button class="copy-btn" data-product-id="${product.id}" title="Copiar enlace del producto">
                    <i class="fas fa-link"></i> Compartir
                    <span class="copy-message">Copiado al portapapeles</span>
                  </button>
                `;
                productsGrid.appendChild(card);
              });
            }
          });

          // Manejador para copiar enlace
          container.addEventListener('click', (e) => {
            if (e.target.closest('.copy-btn')) {
              const button = e.target.closest('.copy-btn');
              const productId = button.dataset.productId;
              const product = [...snapshot.docs].find(doc => doc.id === productId)?.data();
              
              if (product) {
                const url = `${window.location.origin}?product=${productId}`;
                copyToClipboard(url);
                
                // Mostrar mensaje temporal
                const message = button.querySelector('.copy-message');
                message.classList.add('show');
                setTimeout(() => {
                  message.classList.remove('show');
                }, 2000);
              }
            }
          });

          // Funci贸n auxiliar para copiar al portapapeles
          function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
          }

          // Delegaci贸n de eventos para los botones "Ver Planes"
          container.addEventListener('click', (e) => {
            if (e.target.closest('.see-plans-btn')) {
              const productId = e.target.closest('.see-plans-btn').dataset.productId;
              const product = [...snapshot.docs]
                .find(doc => doc.id === productId)?.data();
              if (product) showGlobalModal({ id: productId, ...product });
            }
          });

          // Observador de cards
          document.querySelectorAll(".card").forEach(card => observer.observe(card));
        })
        .catch(error => {
          console.error("Error:", error);
          container.innerHTML = `
            <p style="color: var(--primary-color); text-align: center; padding: 2rem;">
              <i class="fas fa-exclamation-triangle"></i> Error al cargar productos. Cont谩ctanos por 
              <a href="https://wa.me/593978652638" style="color: var(--primary-color);">WhatsApp</a>.
            </p>`;
        });
    });

    // CHATBOT SYSTEM - FullStreamRec AI Assistant
    class FullStreamRecBot {
      constructor() {
        this.knowledgeBase = {
          // Informaci贸n de la empresa
          empresa: {
            nombre: "FullStreamRec",
            descripcion: "Empresa ecuatoriana de entretenimiento digital",
            fundacion: "2024",
            ubicacion: "Ecuador",
            mision: "Hacer que el entretenimiento sea accesible para todos",
            horarios: "Lunes a domingo, 9:00 AM a 9:30 PM",
            contacto: {
              whatsapp: "+593 978 652 638",
              email: "fullstreamrec@gmail.com"
            }
          },
          
          // Servicios y productos
          servicios: {
            streaming: {
              netflix: { precios: ["$3.00 - Perfil Compartido 1 mes", "$4.00 - Perfil Extra 1 mes", "$12.00 - Cuenta Completa 5 perfiles"], categoria: "Streaming de Video" },
              disney: { precios: ["No disponible temporalmente"], categoria: "Streaming de Video" },
              hbo: { precios: ["$3.00 - Perfil 30 d铆as", "$4.00 - Cuenta Completa Est谩ndar", "$7.00 - Cuenta Completa Platino"], categoria: "Streaming de Video" },
              prime: { precios: ["$5.00 - Cuenta Completa 1 mes"], categoria: "Streaming de Video" },
              paramount: { precios: ["$3.00 - Perfil 30 d铆as", "$6.00 - Cuenta Completa 30 d铆as"], categoria: "Streaming de Video" }
            },
            musica: {
              spotify: { precios: ["$4.00 - 1 Mes Individual"], categoria: "M煤sica" },
              youtube: { precios: ["$3.00 - 30 d铆as Individual", "$8.00 - 3 meses Individual", "$6.00 - 30 d铆as Familiar"], categoria: "M煤sica" },
              deezer: { precios: ["$3.00 - 1 Mes", "$6.00 - 3 Meses", "$15.00 - 12 Meses"], categoria: "M煤sica" }
            },
            videojuegos: {
              freefire: { 
                precios: ["$1.50 - 100+10 diamantes", "$3.50 - 310+31 diamantes", "$5.50 - 520+52 diamantes", "$11.00 - 1060+106 diamantes", "$21.00 - 2180+218 diamantes", "$55.00 - 5600+560 diamantes"],
                categoria: "Videojuegos",
                proceso: "Necesitas proporcionar tu ID de Free Fire para la recarga"
              },
              cod: { precios: ["$1.50 - 88 CP", "$6.50 - 460 CP", "$12.00 - 960 CP"], categoria: "Videojuegos" },
              pubg: { precios: ["$1.50 - 60 UC", "$6.00 - 325 UC", "$12.00 - 660 UC"], categoria: "Videojuegos" },
              roblox: { precios: ["$1.50 - 80 Robux", "$6.00 - 400 Robux", "$12.00 - 800 Robux"], categoria: "Videojuegos" }
            },
            iptv: {
              stella: { precios: ["$9.00 - 1 mes 3 dispositivos", "$27.00 - 3 meses", "$48.00 - 6 meses"], categoria: "IPTV" },
              flujo: { precios: ["$9.00 - 1 mes", "$27.00 - 3 meses", "$48.00 - 6 meses"], categoria: "IPTV" },
              descripcion: "Acceso a cientos de canales en vivo y contenido on-demand para Smart TV, celular o PC"
            }
          },

          // FAQ basado en la p谩gina
          faq: {
            "que servicios ofrecen": "Ofrecemos planes de streaming (Netflix, Disney+, HBO Max, Amazon Prime Video), m煤sica (Spotify Premium), IPTV con cientos de canales, y recargas para videojuegos como Free Fire. Todo disponible en Ecuador con precios accesibles.",
            "metodos de pago": "Aceptamos transferencias bancarias a Banco Guayaquil y Banco Pichincha. Una vez que elijas tu plan, te enviaremos los detalles de pago por WhatsApp. 隆Es r谩pido y seguro!",
            "es seguro": "隆Totalmente! Somos una empresa ecuatoriana confiable, con cientos de clientes satisfechos en todo el pa铆s. Usamos m茅todos de pago verificados y protegemos tus datos.",
            "tiempo activacion": "Una vez confirmado tu pago, activamos tu plan en menos de 10 a 30 minutos, aunque suele ser mucho m谩s r谩pido (a veces en segundos). Te notificamos por WhatsApp cuando est茅 listo.",
            "iptv como funciona": "Nuestro IPTV te da acceso a cientos de canales en vivo y contenido on-demand. Te enviamos un enlace y credenciales para usarlo en tu Smart TV, celular o PC. Incluye soporte para configurarlo.",
            "free fire proceso": "S铆, atendemos a todo Ecuador. Elige la cantidad de diamantes, proporciona tu ID de Free Fire, paga con Banco Guayaquil o Banco Pichincha, y recibir谩s tu recarga en minutos.",
            "soporte": "Cont谩ctanos por WhatsApp al +593 978 652 638. Estamos disponibles de lunes a domingo, de 9:00 AM a 9:30 PM, para resolver cualquier duda o inconveniente en minutos.",
            "planes familiares": "S铆, tenemos planes familiares para Netflix y Disney+ que permiten varias pantallas. Escr铆benos por WhatsApp para personalizar tu plan seg煤n tus necesidades.",
            "por que elegir": "Con nosotros, obtienes precios m谩s bajos, atenci贸n personalizada desde Ecuador, y soporte inmediato. Adem谩s, ofrecemos combos y recargas que no encuentras en las plataformas oficiales."
          }
        };

        this.init();
      }

      init() {
        this.chatButton = document.getElementById('chatbot-button');
        this.chatContainer = document.getElementById('chat-container');
        this.chatMessages = document.getElementById('chat-messages');
        this.chatInput = document.getElementById('chat-input');
        this.sendButton = document.getElementById('send-message');
        this.closeButton = document.getElementById('close-chat');
        this.notification = document.getElementById('chat-notification');

        this.bindEvents();
        this.showWelcomeNotification();
      }

      bindEvents() {
        this.chatButton.addEventListener('click', () => this.toggleChat());
        this.closeButton.addEventListener('click', () => this.closeChat());
        this.sendButton.addEventListener('click', () => this.sendMessage());
        this.chatInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.sendMessage();
        });

        // Quick actions
        document.addEventListener('click', (e) => {
          if (e.target.classList.contains('quick-action')) {
            const action = e.target.dataset.action;
            this.handleQuickAction(action);
          }
        });
      }

      showWelcomeNotification() {
        setTimeout(() => {
          this.notification.style.display = 'flex';
        }, 3000);
      }

      toggleChat() {
        if (this.chatContainer.classList.contains('show')) {
          this.closeChat();
        } else {
          this.openChat();
        }
      }

      openChat() {
        this.chatContainer.classList.add('show');
        this.notification.style.display = 'none';
        this.chatInput.focus();
      }

      closeChat() {
        this.chatContainer.classList.remove('show');
      }

      sendMessage() {
        const message = this.chatInput.value.trim();
        if (!message) return;

        this.addUserMessage(message);
        this.chatInput.value = '';
        
        setTimeout(() => {
          this.processMessage(message);
        }, 500);
      }

      addUserMessage(message) {
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message user-message';
        messageDiv.innerHTML = `
          <div class="message-avatar">U</div>
          <div class="message-content">
            <p>${message}</p>
          </div>
        `;
        this.chatMessages.appendChild(messageDiv);
        this.scrollToBottom();
      }

      addBotMessage(message, quickActions = null) {
        this.showTyping();
        
        setTimeout(() => {
          this.hideTyping();
          const messageDiv = document.createElement('div');
          messageDiv.className = 'message bot-message';
          
          let quickActionsHtml = '';
          if (quickActions) {
            quickActionsHtml = '<div class="quick-actions">';
            quickActions.forEach(action => {
              quickActionsHtml += `<button class="quick-action" data-action="${action.action}">${action.label}</button>`;
            });
            quickActionsHtml += '</div>';
          }
          
          messageDiv.innerHTML = `
            <div class="message-avatar">
              <img src="logo.jpg" alt="Bot">
            </div>
            <div class="message-content">
              <p>${message}</p>
              ${quickActionsHtml}
            </div>
          `;
          this.chatMessages.appendChild(messageDiv);
          this.scrollToBottom();
        }, 1000 + Math.random() * 1000);
      }

      showTyping() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message bot-message typing-indicator';
        typingDiv.innerHTML = `
          <div class="message-avatar">
            <img src="logo.jpg" alt="Bot">
          </div>
          <div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        `;
        this.chatMessages.appendChild(typingDiv);
        this.scrollToBottom();
      }

      hideTyping() {
        const typing = this.chatMessages.querySelector('.typing-indicator');
        if (typing) {
          typing.parentElement.remove();
        }
      }

      scrollToBottom() {
        this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
      }

      processMessage(message) {
        const lowerMessage = message.toLowerCase();
        let response = '';
        let quickActions = null;

        // Detecci贸n de intenciones
        if (this.containsWords(lowerMessage, ['hola', 'buenos', 'saludos', 'hey', 'hi'])) {
          response = '隆Hola!  Bienvenido a FullStreamRec. Soy tu asistente virtual y estoy aqu铆 para ayudarte con nuestros servicios de streaming, m煤sica, IPTV y recargas de videojuegos. 驴En qu茅 puedo ayudarte?';
          quickActions = [
            { label: 'Ver Servicios', action: 'servicios' },
            { label: 'Precios', action: 'precios' },
            { label: 'Free Fire', action: 'freefire' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['servicios', 'que ofrecen', 'productos', 'catalogo'])) {
          response = this.knowledgeBase.faq['que servicios ofrecen'] + '\n\n Streaming: Netflix, Disney+, HBO Max, Prime Video\n M煤sica: Spotify, YouTube Premium, Deezer\n IPTV: Cientos de canales en vivo\n Gaming: Free Fire, PUBG, Roblox, Call of Duty';
          quickActions = [
            { label: 'Netflix', action: 'netflix' },
            { label: 'Free Fire', action: 'freefire' },
            { label: 'Spotify', action: 'spotify' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['precio', 'costo', 'cuanto', 'valor'])) {
          response = ' **Nuestros precios m谩s populares:**\n\n **Netflix:** desde $3.00\n **Spotify:** $4.00/mes\n **Free Fire:** desde $1.50 (100 diamantes)\n **HBO Max:** desde $3.00\n **IPTV:** desde $9.00/mes\n\n隆Todos con activaci贸n inmediata!';
          quickActions = [
            { label: 'Ver Netflix', action: 'netflix' },
            { label: 'Ver Free Fire', action: 'freefire' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['free fire', 'freefire', 'diamantes', 'ff'])) {
          response = ' **Free Fire - Recargas de Diamantes:**\n\n 100+10 diamantes - $1.50\n 310+31 diamantes - $3.50\n 520+52 diamantes - $5.50\n 1060+106 diamantes - $11.00\n 2180+218 diamantes - $21.00\n 5600+560 diamantes - $55.00\n\n **Proceso:** Solo necesitas tu ID de Free Fire y listo. Activaci贸n en minutos!';
          quickActions = [
            { label: 'Comprar Diamantes', action: 'comprar-ff' },
            { label: 'C贸mo funciona', action: 'proceso-ff' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['netflix', 'series', 'peliculas'])) {
          response = ' **Netflix - Planes Disponibles:**\n\n Perfil Compartido (1 perfil, 1 mes) - $3.00\n Perfil Extra (1 dispositivo, 1 mes) - $4.00\n Cuenta Completa (5 perfiles, 1 mes) - $12.00\n\n Activaci贸n inmediata tras confirmar pago!';
          quickActions = [
            { label: 'Elegir Plan', action: 'comprar-netflix' },
            { label: 'Otros Servicios', action: 'servicios' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['spotify', 'musica', 'premium'])) {
          response = ' **Spotify Premium:**\n\n Plan Individual - $4.00/mes\n\n Disfruta m煤sica sin anuncios, descargas offline y calidad superior. 隆Perfecto para los amantes de la m煤sica!';
          quickActions = [
            { label: 'Comprar Spotify', action: 'comprar-spotify' },
            { label: 'Otras opciones', action: 'musica' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['pago', 'como pagar', 'transferencia', 'banco'])) {
          response = this.knowledgeBase.faq['metodos de pago'] + '\n\n **Bancos aceptados:**\n Banco Guayaquil\n Banco Pichincha\n\n Proceso: Eliges  Te enviamos datos  Transfieres  Activamos';
          quickActions = [
            { label: 'Ver Servicios', action: 'servicios' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['iptv', 'canales', 'television', 'tv'])) {
          response = ' **IPTV - Televisi贸n Digital:**\n\n' + this.knowledgeBase.servicios.iptv.descripcion + '\n\n **Precios:**\n Stella TV: desde $9.00/mes\n Flujo TV: desde $9.00/mes\n Tele Latino: desde $9.00/mes\n\n Compatible con Smart TV, celular, PC y m谩s!';
          quickActions = [
            { label: 'M谩s info IPTV', action: 'iptv-info' },
            { label: 'Ver precios', action: 'precios' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['contacto', 'whatsapp', 'telefono', 'comunicar'])) {
          response = ' **Contacto FullStreamRec:**\n\n WhatsApp: +593 978 652 638\n Email: fullstreamrec@gmail.com\n Horarios: Lunes a Domingo, 9:00 AM - 9:30 PM\n\n隆Estamos aqu铆 para ayudarte! Respuesta garantizada en minutos. ';
          quickActions = [
            { label: 'Ir a WhatsApp', action: 'whatsapp' },
            { label: 'Ver Servicios', action: 'servicios' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['tiempo', 'cuanto tarda', 'activacion', 'demora'])) {
          response = this.knowledgeBase.faq['tiempo activacion'] + '\n\n **Proceso r谩pido:**\n1. Eliges tu plan\n2. Realizas el pago\n3. Nos env铆as comprobante\n4. 隆Activamos en minutos!';
          quickActions = [
            { label: 'Ver Servicios', action: 'servicios' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else if (this.containsWords(lowerMessage, ['seguro', 'confiable', 'estafa', 'legitimo'])) {
          response = this.knowledgeBase.faq['es seguro'] + '\n\n **Garant铆as:**\n Empresa ecuatoriana establecida\n Miles de clientes satisfechos\n M茅todos de pago verificados\n Soporte 7 d铆as a la semana\n Activaci贸n garantizada';
        }
        else if (this.containsWords(lowerMessage, ['gracias', 'perfecto', 'excelente', 'bueno'])) {
          response = '隆De nada!  Me alegra haber podido ayudarte. Si tienes m谩s preguntas sobre nuestros servicios de streaming, m煤sica, IPTV o recargas de videojuegos, no dudes en preguntar.\n\n驴Hay algo m谩s en lo que pueda asistirte?';
          quickActions = [
            { label: 'Ver Servicios', action: 'servicios' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }
        else {
          // Respuesta general con b煤squeda inteligente
          const keywords = this.extractKeywords(lowerMessage);
          const suggestion = this.findBestMatch(keywords);
          
          response = `Entiendo que preguntas sobre "${message}". ${suggestion}\n\n驴Te gustar铆a que te ayude con alguno de estos temas?`;
          quickActions = [
            { label: 'Ver Servicios', action: 'servicios' },
            { label: 'Precios', action: 'precios' },
            { label: 'Free Fire', action: 'freefire' },
            { label: 'Contactar', action: 'contacto' }
          ];
        }

        this.addBotMessage(response, quickActions);
      }

      handleQuickAction(action) {
        switch(action) {
          case 'servicios':
            this.processMessage('servicios');
            break;
          case 'precios':
            this.processMessage('precios');
            break;
          case 'freefire':
            this.processMessage('free fire');
            break;
          case 'netflix':
            this.processMessage('netflix');
            break;
          case 'spotify':
            this.processMessage('spotify');
            break;
          case 'contacto':
            this.processMessage('contacto');
            break;
          case 'whatsapp':
            window.open('https://wa.me/593978652638', '_blank');
            this.addBotMessage('隆Te he redirigido a nuestro WhatsApp! All铆 podremos ayudarte de manera personalizada. ');
            break;
          case 'comprar-ff':
          case 'comprar-netflix':
          case 'comprar-spotify':
            this.addBotMessage('隆Perfecto! Te redirijo a nuestra p谩gina principal donde podr谩s ver todos los planes y realizar tu compra de manera segura. ', [
              { label: 'Ir a Servicios', action: 'ir-servicios' },
              { label: 'WhatsApp', action: 'whatsapp' }
            ]);
            break;
          case 'ir-servicios':
            window.scrollTo({ top: 0, behavior: 'smooth' });
            this.closeChat();
            break;
          default:
            this.processMessage(action);
        }
      }

      containsWords(text, words) {
        return words.some(word => text.includes(word));
      }

      extractKeywords(text) {
        const commonWords = ['el', 'la', 'de', 'que', 'y', 'a', 'en', 'un', 'es', 'se', 'no', 'te', 'lo', 'le', 'da', 'su', 'por', 'son', 'con', 'para', 'como', 'pero', 'sus', 'del', 'ha', 'me', 'mi', 'tu', 'si', 'yo'];
        return text.split(' ').filter(word => word.length > 2 && !commonWords.includes(word));
      }

      findBestMatch(keywords) {
        const services = Object.keys(this.knowledgeBase.servicios).join(', ');
        if (keywords.some(k => ['netflix', 'streaming', 'series', 'peliculas'].includes(k))) {
          return 'Parece que te interesa el streaming. Tenemos Netflix, HBO Max, Disney+ y m谩s.';
        }
        if (keywords.some(k => ['juego', 'gaming', 'diamantes', 'recarga'].includes(k))) {
          return 'Te puedo ayudar con recargas de videojuegos como Free Fire, PUBG, Roblox y m谩s.';
        }
        if (keywords.some(k => ['musica', 'spotify', 'cancion'].includes(k))) {
          return 'Para m煤sica tenemos Spotify Premium, YouTube Premium y Deezer.';
        }
        return 'Te puedo ayudar con informaci贸n sobre nuestros servicios, precios y proceso de compra.';
      }
    }

    // Inicializar el chatbot
    document.addEventListener('DOMContentLoaded', () => {
      new FullStreamRecBot();
    });

    // Hacer funciones globales para el carrito
    window.addToCart = addToCart;
    window.removeFromCart = removeFromCart;
    window.updateCart = updateCart;
  </script>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="particles-config.js"></script>
</body>
</html>